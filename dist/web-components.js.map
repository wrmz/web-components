{"version":3,"file":"web-components.js","sources":["../src/modules/icon/chevron-icon/chevron-icon.js","../src/modules/common/register-components.js","../src/modules/form/info-message/info-message.js","../src/modules/form/common/FormElement.js","../src/modules/form/field-input/field-input.js","../src/modules/form/radio-group/radio-group.js","../src/modules/chart/donut/chart-donut.js","../src/modules/map/gl-google-marker/gl-google-marker.js","../src/modules/map/gl-google-map/gl-google-map.js","../src/modules/form/mortgage-calc-input/mortgage-calc-input.js","../src/modules/form/mortgage-calc/mortgage-calc.js"],"sourcesContent":["/**\n * @injectHTML\n */\nexport class ChevronIcon extends HTMLElement {\n    constructor() {\n        super();\n    }\n\n    static get observedAttributes() { return ['title']; }\n\n    attributeChangedCallback(attrName, oldVal, newVal) {\n        this.shadowRoot.querySelector('svg title').textContent = newVal;\n    }\n}\n\nif (!window.customElements.get('chevron-icon')) {\n    window.customElements.define('chevron-icon', ChevronIcon);\n}\n","export function registerComponents (...args) {\n    args ? '' : console.error('Please register your components');\n}\n","import { registerComponents } from '../../common/register-components';\nimport { ChevronIcon } from '../../icon/chevron-icon/chevron-icon';\n\n/**\n * @injectHTML\n */\nexport class InfoMessage extends HTMLElement {\n    constructor() {\n        super();\n        registerComponents(ChevronIcon);\n        this.shadowRoot.querySelector('slot').addEventListener('slotchange', this.handleSlotChange, false);\n    }\n\n    handleSlotChange(e) {\n        e.target.assignedElements({ flatten: true }).length > 0 ? this.setAttribute('shown', '') : this.removeAttribute('shown');\n    }\n}\n\nif (!window.customElements.get('info-message')) {\n    window.customElements.define('info-message', InfoMessage);\n}\n","export class FormElement extends HTMLElement {\n    static get observedAttributes() {\n        return ['invalid', 'value'];\n    }\n\n    constructor() {\n        super();\n        this.input = null;\n        this.radios = null;\n        this.handleFormElementInvalid = this.handleFormElementInvalid.bind(this);\n        this.handleFormElementInput = this.handleFormElementInput.bind(this);\n    }\n\n    get valid() { return !this.hasAttribute('invalid') && !this.hasAttribute('aria-invalid'); }\n    set valid(v) {\n        if (v) {\n            this.removeAttribute('invalid');\n            this.removeAttribute('aria-invalid');\n        } else {\n            this.setAttribute('invalid', '');\n            this.setAttribute('aria-invalid', '');\n        }\n    }\n\n    registerElementForValidation(element) {\n        element.addEventListener('invalid', this.handleFormElementInvalid, false);\n        element.addEventListener('input', this.handleFormElementInput, false);\n    }\n\n    handleFormElementInvalid(e) {\n        this.valid = false;\n        this.toggleInvalidAttribute(e.target);\n    }\n\n    handleFormElementInput(e) {\n        const element = e.target;\n        this.valid = element.checkValidity();\n        this.toggleInvalidAttribute(element);\n    }\n\n    toggleInvalidAttribute(element) {\n        const errorMsg = this.shadowRoot.querySelector('info-message[role=\"alert\"]');\n        if (errorMsg) {\n            element.validity.valid ? errorMsg.removeAttribute('invalid') : errorMsg.setAttribute('invalid', '');\n        }\n\n    }\n\n    handleChanged() {\n        const errorMsg = this.shadowRoot.querySelector('info-message[role=\"alert\"]');\n        if (errorMsg) {\n            this.hasAttribute('invalid') ? errorMsg.setAttribute('invalid', '') : errorMsg.removeAttribute('invalid');\n        }\n    }\n\n    attributeChangedCallback() {\n        this.handleChanged();\n    }\n}\n","import { FormElement } from '../common/FormElement';\n\n/**\n * @injectHTML\n */\nexport class FieldInput extends FormElement {\n\n    constructor() {\n        super();\n        this.input = null;\n        this.handleInput = this.handleInput.bind(this);\n        this.handleKeyup = this.handleKeyup.bind(this);\n        this.handleSlotChange = this.handleSlotChange.bind(this);\n        this.shadowInput = this.shadowRoot.querySelector('slot[name=\"input\"]');\n        this.shadowInput.addEventListener('slotchange', this.handleSlotChange, false);\n    }\n\n    get value() { return this.getAttribute('value') || ''; }\n    set value(v) { this.setAttribute('value', v); }\n\n    handleSlotChange(e) {\n        this.input = [...e.target.assignedElements()].find(el => el.tagName === 'INPUT');\n        if (this.input) {\n            this.registerElementForValidation(this.input);\n            this.input.value = this._value || this.getAttribute('value') || '';\n            this.input.addEventListener('input', this.handleInput, false);\n            this.input.addEventListener('keyup', this.handleKeyup, false);\n        }\n    }\n\n    handleInput(e) {\n        this.value = e.target.value;\n    }\n\n    handleKeyup() { }\n\n    disconnectedCallback() {\n        this.input.removeEventListener('input', this.handleInput);\n        this.input.removeEventListener('keyup', this.handleKeyup);\n        this.shadowInput.removeEventListener('slotchange', this.handleSlotChange);\n    }\n}\n\nif (!window.customElements.get('field-input')) {\n    window.customElements.define('field-input', FieldInput);\n}\n","import { registerComponents } from '../../common/register-components.js';\nimport { FormElement } from '../common/FormElement.js';\nimport { InfoMessage } from '../info-message/info-message.js';\n\n/**\n * @injectHTML\n */\nexport class RadioGroup extends FormElement {\n    static sanitize(v) { return (v + '').trim().replace(/[^0-9.]*/g, ''); }\n\n    constructor() {\n        super();\n        registerComponents(InfoMessage);\n        this.radios = null;\n        this.handleSlotChange = this.handleSlotChange.bind(this);\n        this.shadowRadios = this.shadowRoot.querySelector('.radio-group__options slot');\n        this.shadowRadios.addEventListener('slotchange', this.handleSlotChange, false);\n    }\n\n    get value() { return this.getAttribute('value') || ''; }\n    set value(v) { this.setAttribute('value', v); }\n\n    get numeric() {\n        const sanitized = RadioGroup.sanitize(this.value);\n        return isNaN(sanitized) ? 0 : sanitized;\n    }\n\n    get selectedRadio() {\n        return this.radios && this.value\n            ? this.radios.find(el => el.checked)\n            : null;\n    }\n    set selectedRadio(v) {\n        if (v && this.radios) {\n            const radio = this.radios.find(el => el.value === v);\n            if (radio) {\n                radio.checked = true;\n            }\n        }\n    }\n\n    handleSlotChange(e) {\n        this.radios = [...e.target.assignedElements()]\n            .flatMap(el => ([el, ...el.children]))\n            .filter(el => el.tagName === 'INPUT');\n\n        if (this.value) {\n            this.selectedRadio = this.value;\n        }\n\n        this.addEventListener('input', this.handleInput, false);\n    }\n\n    handleInput(e) {\n        this.value = e.target.value;\n    }\n\n    attributeChangedCallback(attr, oldVal, newVal) {\n        this.handleChanged();\n        if (attr === 'value') {\n            this._value = newVal;\n        }\n    }\n\n    detachedCallback() {\n        this.removeEventListener('input', this.handleInput);\n    }\n}\n\nif (!window.customElements.get('radio-group')) {\n    window.customElements.define('radio-group', RadioGroup);\n}\n","/**\n * @injectHTML\n */\nexport class ChartDonut extends HTMLElement {\n    static get observedAttributes() {\n        return [\n            'colors',\n            'values',\n            'labels',\n        ];\n    }\n\n    static degreesToRadians(angle) {\n        return angle * (Math.PI / 180);\n    }\n\n    constructor() {\n        super();\n        this.gap = 2;\n        this.cx = 80;\n        this.cy = 80;\n        this.radius = 60;\n        this.angleOffset = -90;\n        this.chartData = [];\n        this.segmentElems = [];\n        this.isLoaded = false;\n\n        this.svg = this.shadowRoot.querySelector('svg');\n\n        this.generateSegment = this.generateSegment.bind(this);\n        this.updateSegment = this.updateSegment.bind(this);\n    }\n\n    get currencyFormat() {\n        return new Intl.NumberFormat('en-US', {\n            style: 'currency',\n            currency: 'USD',\n            minimumFractionDigits: 0,\n            maximumFractionDigits: 0,\n        }).format;\n    }\n\n    set colors(v) {\n        this.setAttribute('colors', JSON.stringify(v));\n    }\n\n    get colors() {\n        const colors = (this.getAttribute('colors') || '').replace(/'/g, '\"');\n        return colors ? JSON.parse(colors) : ['red', 'green', 'blue'];\n    }\n\n    set labels(v) {\n        this.setAttribute('labels', JSON.stringify(v));\n    }\n\n    get labels() {\n        const labels = (this.getAttribute('labels') || '').replace(/'/g, '\"');\n        return labels ? JSON.parse(labels) : [];\n    }\n\n    set values(v) {\n        this.setAttribute('values', JSON.stringify(v));\n    }\n\n    get values() {\n        const values = (this.getAttribute('values') || '').replace(/'/g, '\"');\n        return values ? JSON.parse(values) : [];\n    }\n\n    get total() {\n        return this.values.length\n            ? this.values.reduce((previous, current) => previous + current)\n            : 0;\n    }\n\n    get circumference() {\n        return 2 * Math.PI * this.radius;\n    }\n\n    get adjustedCircumference() {\n        return this.circumference - this.gap;\n    }\n\n    /**\n     * Loops through the values and generates a segment for each\n     */\n    generateSegments() {\n        this.values.forEach(this.generateSegment);\n    }\n\n    /**\n     * Generates an individual segment\n     * @param {number} val - The amount this segmenet represents\n     * @param {number} i - Index of this value in `this.values`\n     */\n    generateSegment(val, i) {\n        const circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');\n        const title = document.createElementNS('http://www.w3.org/2000/svg', 'title');\n        const data = {\n            degrees: this.angleOffset,\n        };\n\n        this.angleOffset += this.dataPercentage(this.values[i]) * 360;\n        this.chartData.push(data);\n\n        circle.setAttribute('tabindex', '0');\n        circle.setAttribute('cx', this.cx);\n        circle.setAttribute('cy', this.cy);\n        circle.setAttribute('r', this.radius);\n        circle.setAttribute('fill', 'transparent');\n        circle.setAttribute('stroke', this.colors[i]);\n        circle.setAttribute('stroke-width', 30);\n        circle.setAttribute('stroke-dasharray', this.adjustedCircumference);\n        circle.setAttribute('stroke-dashoffset', this.calculateStrokeDashOffset(this.values[i]));\n        circle.setAttribute('transform', this.calculateTransform(i));\n        circle.appendChild(title);\n        title.textContent = `${this.labels[i]}: ${this.currencyFormat(val)}`;\n\n        this.segmentElems.push(circle);\n        this.svg.appendChild(circle);\n    }\n\n    updateSegments() {\n        this.angleOffset = -90;\n        this.chartData = [];\n        this.values.forEach(this.updateSegment);\n    }\n\n    updateSegment(val, i) {\n        const circle = this.segmentElems[i];\n        const title = circle.querySelector('title');\n        const data = {\n            degrees: this.angleOffset,\n        };\n\n        this.angleOffset += this.dataPercentage(this.values[i]) * 360;\n        this.chartData.push(data);\n\n        title.textContent = `${this.labels[i]}: ${this.currencyFormat(val)}`;\n        circle.setAttribute('stroke-dasharray', this.adjustedCircumference);\n        circle.setAttribute('stroke-dashoffset', this.calculateStrokeDashOffset(this.values[i]));\n        circle.setAttribute('transform', this.calculateTransform(i));\n    }\n\n    calculateStrokeDashOffset(val) {\n        const strokeDiff = this.dataPercentage(val) * this.circumference;\n        return this.circumference - strokeDiff;\n    }\n\n    /**\n     * Calculates the transform rotation the circle should be\n     * attributed with\n     * @param {Number} i - The index of chart data to use\n     * @returns {String} - The rotation of the circle\n     */\n    calculateTransform(i) {\n        return `rotate(${this.chartData[i].degrees}, ${this.cx}, ${this.cy})`;\n    }\n\n    /**\n     * Gets the percentage a given value represents of the total\n     * @param {Number} val - The divisor\n     * @returns {Number} - The percentage\n     */\n    dataPercentage(val) {\n        return (this.total && val) ? val / this.total : 0;\n    }\n\n    /**\n     * Destroys the segments of the circle by removing the elements,\n     * removing them from the `segmentElems` array and removing their\n     * data from the `segmentElems` array.\n     */\n    destroySegments() {\n        while (this.svg.firstChild) {\n            this.svg.removeChild(this.svg.firstChild);\n            this.segmentElems.shift();\n            this.chartData.shift();\n        }\n        this.angleOffset = -90;\n    }\n\n    connectedCallback() {\n\n        this.generateSegments();\n        this.isLoaded = true;\n    }\n\n    /**\n     * @param {string} attr - The attribute which changed\n     * @param {string} oldVal - The old value\n     * @param {string} newVal - The new value\n     */\n    attributeChangedCallback() {\n        if (this.isLoaded && this.colors && this.values && this.total) {\n            this.updateSegments();\n        }\n    }\n}\n\nif (!window.customElements.get('chart-donut')) {\n    window.customElements.define('chart-donut', ChartDonut);\n}\n","export class GlGoogleMarker extends HTMLElement {\n    static get observedAttributes() {\n        return [\n            'latitude',\n            'longitude',\n        ];\n    }\n\n    constructor() {\n        super();\n    }\n\n    get latitude() {\n        const latitude = parseFloat(this.hasAttribute('latitude') ? this.getAttribute('latitude') : '0');\n        return  isNaN(latitude) ? 0 : latitude;\n    }\n\n    get longitude() {\n        const longitude = parseFloat(this.hasAttribute('longitude') ? this.getAttribute('longitude') : '0');\n        return  isNaN(longitude) ? 0 : longitude;\n    }\n}\n\nif (!window.customElements.get('gl-google-marker')) {\n    window.customElements.define('gl-google-marker', GlGoogleMarker);\n}\n","/*global google*/\nimport { registerComponents } from '../../common/register-components.js';\nimport { GlGoogleMarker } from '../gl-google-marker/gl-google-marker.js';\n\n/**\n * @injectHTML\n */\nexport class GlGoogleMap extends HTMLElement {\n    static get observedAttributes() {\n        return [\n            'key',\n            'latitude',\n            'longitude',\n            'overlay',\n            'map-style',\n            'show-markers',\n            'show-kml',\n            'show-image',\n        ];\n    }\n\n    static async getStyle(url) {\n        const repsonse = await fetch(url);\n        const json = await repsonse.json();\n\n        return json;\n    }\n\n    constructor() {\n        super();\n\n        registerComponents(GlGoogleMarker);\n\n        this.isAdmin = true;\n        this.key = '';\n        this._id = crypto.randomUUID ? crypto.randomUUID().split('-').pop() : Math.round(Math.random() * 9999);\n        this._imageElem = this.querySelector('img');\n        this._markerElems = [...this.querySelectorAll('gl-google-marker')];\n        this._markers = [];\n        this._adminMarkers = [];\n        this.apiLoadedCBName = `gl_cb_${this._id}`;\n        this.map = undefined;\n        this.styleLayer = undefined;\n        this.imageLayer = undefined;\n        this.imageNE = 0.0;\n        this.imageNW = 0.0;\n        this.imageSW = 0.0;\n        this.imageSE = 0.0;\n        this.kmlLayer = undefined;\n        this.elem = this.shadowRoot.querySelector('.gl-map');\n        this.mapElem = this.shadowRoot.querySelector('.gl-map__map');\n        this.detailElem = null;\n\n        this.elem.setAttribute('id', `map_${this._id}`);\n\n        this.generateAdminMarker = this.generateAdminMarker.bind(this);\n        this.generateMarker = this.generateMarker.bind(this);\n        this.loadDetail = this.loadDetail.bind(this);\n    }\n\n    get isMarkersVisible() {\n        return this.getAttribute('show-markers') === 'true';\n    }\n\n    set isMarkersVisible(val) {\n        this.setAttribute('show-markers', val);\n    }\n\n    get isKmlVisible() {\n        return this.getAttribute('show-kml') === 'true';\n    }\n\n    set isKmlVisible(val) {\n        this.setAttribute('show-kml', val);\n    }\n\n    get isImageVisible() {\n        return this.getAttribute('show-image') === 'true';\n    }\n\n    set isImageVisible(val) {\n        this.setAttribute('show-image', val);\n    }\n\n    get latitude() {\n        const latitude = parseFloat(this.hasAttribute('latitude') ? this.getAttribute('latitude') : '0');\n        return  isNaN(latitude) ? 0 : latitude;\n    }\n\n    get longitude() {\n        const longitude = parseFloat(this.hasAttribute('longitude') ? this.getAttribute('longitude') : '0');\n        return  isNaN(longitude) ? 0 : longitude;\n    }\n\n    get overlay() {\n        return this.getAttribute('overlay');\n    }\n\n    get mapStyle() {\n        return this.getAttribute('map-style');\n    }\n\n    get markerElems() {\n        return [...this._markerElems];\n    }\n\n    get imageElemPosition() {\n        const neLatitude = parseFloat(this._imageElem.getAttribute('latitude-ne'));\n        const neLongitude = parseFloat(this._imageElem.getAttribute('longitude-ne'));\n        const swLatitude = parseFloat(this._imageElem.getAttribute('latitude-sw'));\n        const swLongitude = parseFloat(this._imageElem.getAttribute('longitude-sw'));\n\n        return {\n            neLatitude: isNaN(neLatitude) ? 0.00 : neLatitude,\n            neLongitude: isNaN(neLongitude) ? 0.00 : neLongitude,\n            swLatitude: isNaN(swLatitude) ? 0.00 : swLatitude,\n            swLongitude: isNaN(swLongitude) ? 0.00 : swLongitude\n        };\n    }\n\n    set imageElemPosition(val) {\n        this._imageElem.setAttribute('latitude-ne', val.neLatitude);\n        this._imageElem.setAttribute('longitude-ne', val.neLongitude);\n        this._imageElem.setAttribute('latitude-sw', val.swLatitude);\n        this._imageElem.setAttribute('longitude-sw', val.swLongitude);\n\n        if (google && google.maps && this.imageLayer) {\n            const bounds = new google.maps.LatLngBounds(\n                new google.maps.LatLng(val.neLatitude, val.neLongitude),\n                new google.maps.LatLng(val.swLatitude, val.swLongitude)\n            );\n            this.imageLayer.setBounds(bounds);\n            this.imageLayer.draw();\n        }\n    }\n\n    get adminMarkers() {\n        return this._adminMarkers;\n    }\n\n    set adminMarkers(arr) {\n        this._adminMarkers = Array.isArray(arr) ? arr.map(this.generateAdminMarker) : [];\n    }\n\n    get markers() {\n        return this._markers;\n    }\n\n    set markers(markers) {\n        if (this.map && google && google.maps) {\n            this._markers = [\n                ...this.adminMarkers,\n                ...markers.map(this.generateMarker)\n            ];\n        } else {\n            this._markers = [...this.adminMarkers];\n        }\n    }\n\n    /**\n     * @todo This should be an async function.\n     * Need a way to know when everything has been loaded and\n     * drawn before actually displaying the map.\n     */\n    handleApiLoaded() {\n        this.map = new google.maps.Map(this.mapElem, {\n            center: { lat: this.latitude, lng: this.longitude },\n            mapTypeControl: false,\n            scaleControl: false,\n            streetViewControl: false,\n            fullscreenControl: false,\n            zoom: 8\n        });\n        this.setMapStyle();\n        this.placeImages();\n        this.generateKml();\n        this.markers = this.markerElems;\n    }\n\n    async placeImages() {\n        const imageUrl = this._imageElem.getAttribute('src');\n        const neLatitude = this.imageElemPosition.neLatitude;\n        const neLongitude = this.imageElemPosition.neLongitude;\n        const swLatitude = this.imageElemPosition.swLatitude;\n        const swLongitude = this.imageElemPosition.swLongitude;\n        const bounds = new google.maps.LatLngBounds(\n            new google.maps.LatLng(neLatitude, neLongitude),\n            new google.maps.LatLng(swLatitude, swLongitude)\n        );\n\n        this.adminMarkers = [\n            { label: 'ne', latitude: neLatitude, longitude: neLongitude },\n            { label: 'sw', latitude: swLatitude, longitude: swLongitude },\n        ];\n\n        if (!imageUrl) {\n            return;\n        }\n\n        GlGoogleImage.prototype = new google.maps.OverlayView();\n        function GlGoogleImage(bounds, image, map) {\n            this._bounds = bounds;\n            this._imageElem = image;\n            this._map = map;\n            this._div = undefined;\n\n            this.setMap(map);\n        }\n\n        GlGoogleImage.prototype.setBounds = function(bounds) {\n            this._bounds = bounds;\n        };\n\n        GlGoogleImage.prototype.onAdd = function() {\n            const panes = this.getPanes();\n\n            this._div = document.createElement('div');\n            // this._div.style.borderStyle = 'none';\n            // this._div.style.borderWidth = '0';\n            this._div.style.border = '2px solid red';\n            this._div.style.position = 'absolute';\n\n            this._imageElem.parentNode.removeChild(this._imageElem);\n            this._imageElem.style.width = '100%';\n            this._imageElem.style.height = '100%';\n            this._imageElem.style.position = 'absolute';\n            this._imageElem.style.display = 'block';\n            this._div.appendChild(this._imageElem);\n\n            // For draggable positioning, we'll use `floatPane` instead of `overlayLayer`\n            panes.overlayLayer.appendChild(this._div);\n        };\n\n        GlGoogleImage.prototype.draw = function(bounds) {\n            const overlayProjection = this.getProjection();\n            const boundsNE = bounds ? bounds.getNorthEast() : this._bounds.getNorthEast();\n            const boundsSW = bounds ? bounds.getSouthWest() : this._bounds.getSouthWest();\n            const sw = overlayProjection.fromLatLngToDivPixel(boundsSW);\n            const ne = overlayProjection.fromLatLngToDivPixel(boundsNE);\n\n            if (this._div) {\n                this._div.style.top = `${sw.y}px`;\n                this._div.style.left = `${ne.x}px`;\n                this._div.style.width = `${sw.x - ne.x}px`;\n                this._div.style.height = `${ne.y - sw.y}px`;\n            }\n        };\n\n        GlGoogleImage.prototype.onRemove = function() {\n            if (this._div) {\n                this._div.parentNode.removeChild(this._div);\n                this._div = null;\n            }\n        };\n\n\n        this.imageLayer = new GlGoogleImage(bounds, this._imageElem, this.map);\n        this.imageLayer.setMap(this.map);\n    }\n\n    async setMapStyle() {\n        const mapStyle = await GlGoogleMap.getStyle(this.mapStyle);\n\n        if (mapStyle) {\n            this.styleLayer = new google.maps.StyledMapType(mapStyle, { name: `Map${this._id}` });\n            this.map.mapTypes.set(`map_${this._id}`, this.styleLayer);\n            this.map.setMapTypeId(`map_${this._id}`);\n        }\n    }\n\n    generateKml() {\n        this.kmlLayer = new google.maps.KmlLayer({\n            url: this.overlay,\n            map: this.map,\n            suppressInfoWindows: true,\n        });\n    }\n\n    generateAdminMarker(marker) {\n        const adminMarker = new google.maps.Marker({\n            map: this.map,\n            type: 'admin',\n            position: { lat: marker.latitude, lng: marker.longitude },\n            icon: {\n                path: 'M10 20c5.523 0 10-4.477 10-10S15.523 0 10 0 0 4.477 0 10s4.477 10 10 10Z',\n                scale: 1,\n                fillColor: 'white',\n                strokeColor: 'white',\n                fillOpacity: 0.8,\n                strokeWeight: 2,\n                anchor: new google.maps.Point(10, 10)\n            },\n            draggable: true\n        });\n\n        adminMarker.addListener('dragstart', (event) => {\n            console.log('drag began', event);\n        });\n        adminMarker.addListener('drag', (event) => {\n            const label = marker.label;\n            const lat = event.latLng.lat();\n            const lng = event.latLng.lng();\n\n            this.imageElemPosition = {\n                neLatitude: (label === 'nw' || label === 'ne') ? lat : this.imageElemPosition.neLatitude,\n                neLongitude: (label === 'nw' || label === 'ne') ? lng : this.imageElemPosition.neLongitude,\n                swLatitude: (label === 'sw' || label == 'se') ? lat : this.imageElemPosition.swLatitude,\n                swLongitude: (label === 'sw' || label == 'se') ? lng : this.imageElemPosition.swLongitude,\n            };\n        });\n        adminMarker.addListener('dragend', (event) => {\n            console.log('drag finished', event);\n        });\n        return adminMarker;\n    }\n\n    generateMarker(marker) {\n        const mapMarker = new google.maps.Marker({\n            map: this.map,\n            id: marker.id,\n            type: 'client',\n            position: { lat: marker.latitude, lng: marker.longitude },\n            icon: {\n                path: 'M10 0c5.52285 0 10 4.47715 10 10 0 7.50794-5.59957 12.48988-10 12.48988S0 17.78101 0 10C0 4.47715 4.47715 0 10 0Zm0 3.4743c-3.60404 0-6.5257 2.92166-6.5257 6.5257 0 3.60404 2.92166 6.5257 6.5257 6.5257 3.60404 0 6.5257-2.92166 6.5257-6.5257 0-3.60404-2.92166-6.5257-6.5257-6.5257Zm0 3.0039c1.94504 0 3.5218 1.57676 3.5218 3.5218 0 1.94504-1.57676 3.5218-3.5218 3.5218-1.94504 0-3.5218-1.57676-3.5218-3.5218 0-1.94504 1.57676-3.5218 3.5218-3.5218Z',\n                fillColor: 'red',\n                fillOpacity: 0.6,\n                strokeWeight: 0,\n                anchor: new google.maps.Point(10, 22)\n            },\n            animation: google.maps.Animation.DROP,\n            draggable: true,\n        });\n        mapMarker.addListener('mouseover', () => {\n            mapMarker.setIcon({\n                path: 'M10 0c5.52285 0 10 4.47715 10 10 0 7.50794-5.59957 12.48988-10 12.48988S0 17.78101 0 10C0 4.47715 4.47715 0 10 0Zm0 3.4743c-3.60404 0-6.5257 2.92166-6.5257 6.5257 0 3.60404 2.92166 6.5257 6.5257 6.5257 3.60404 0 6.5257-2.92166 6.5257-6.5257 0-3.60404-2.92166-6.5257-6.5257-6.5257Zm0 3.0039c1.94504 0 3.5218 1.57676 3.5218 3.5218 0 1.94504-1.57676 3.5218-3.5218 3.5218-1.94504 0-3.5218-1.57676-3.5218-3.5218 0-1.94504 1.57676-3.5218 3.5218-3.5218Z',\n                fillColor: 'red',\n                fillOpacity: 1,\n                strokeWeight: 0,\n                anchor: new google.maps.Point(10, 22)\n            });\n        });\n        mapMarker.addListener('mouseout', () => {\n            mapMarker.setIcon({\n                path: 'M10 0c5.52285 0 10 4.47715 10 10 0 7.50794-5.59957 12.48988-10 12.48988S0 17.78101 0 10C0 4.47715 4.47715 0 10 0Zm0 3.4743c-3.60404 0-6.5257 2.92166-6.5257 6.5257 0 3.60404 2.92166 6.5257 6.5257 6.5257 3.60404 0 6.5257-2.92166 6.5257-6.5257 0-3.60404-2.92166-6.5257-6.5257-6.5257Zm0 3.0039c1.94504 0 3.5218 1.57676 3.5218 3.5218 0 1.94504-1.57676 3.5218-3.5218 3.5218-1.94504 0-3.5218-1.57676-3.5218-3.5218 0-1.94504 1.57676-3.5218 3.5218-3.5218Z',\n                fillColor: 'red',\n                fillOpacity: 0.6,\n                strokeWeight: 0,\n                anchor: new google.maps.Point(10, 22)\n            });\n        });\n        mapMarker.addListener('dragend', (event) => {\n            const dragendEvent = new CustomEvent('dragend', {\n                detail: {\n                    map: this.map,\n                    marker: mapMarker,\n                    position: {\n                        latitude: event.latLng.lat(),\n                        longitude: event.latLng.lng()\n                    }\n                }\n            });\n            this.dispatchEvent(dragendEvent);\n        });\n\n        mapMarker.addListener('click', () => {\n            this.loadDetail(mapMarker);\n        });\n\n        return mapMarker;\n    }\n\n    generateDetail() {\n        const detailElem = document.createElement('div');\n        const contentElem = document.createElement('div');\n        const closeElem = document.createElement('button');\n\n        closeElem.setAttribute('type', 'button');\n        closeElem.className = 'gl-map__detail-close';\n        closeElem.innerHTML = '&times;';\n        closeElem.addEventListener('click', this.closeDetail.bind(this), false);\n\n        contentElem.className = 'gl-map__detail-content';\n\n        detailElem.className = 'gl-map__detail';\n        detailElem.appendChild(contentElem);\n        detailElem.appendChild(closeElem);\n\n        this.elem.appendChild(detailElem);\n        this.detailElem = detailElem;\n        this.detailContentElem = contentElem;\n    }\n\n    loadDetail(marker) {\n        const markerElem = this.markerElems.find(elem => elem.id === marker.id);\n        const markerElemChildren = markerElem ? [...markerElem.children] : [];\n\n        this.elem.classList.remove('has-detail');\n\n        if (!this.detailElem) {\n            this.generateDetail();\n        }\n\n        while (this.detailContentElem.firstChild) {\n            this.detailContentElem.removeChild(this.detailContentElem.lastChild);\n            console.log('removing child');\n        }\n\n        markerElemChildren.forEach((child) => {\n            this.detailContentElem.appendChild(child.cloneNode(true));\n        });\n\n        this.elem.classList.add('has-detail');\n    }\n\n    closeDetail() {\n        this.elem.classList.remove('has-detail');\n    }\n\n    loadGoogleMapsApi() {\n        const endpoint = 'https://maps.googleapis.com/maps/api/js';\n        const script = document.createElement('script');\n        script.id = `map_script_${this._id}`;\n        script.type = 'text/javascript';\n        script.src = `${endpoint}?key=${this.key}&callback=${this.apiLoadedCBName}&v=weekly`;\n        script.defer = true;\n        script.async = true;\n        window[this.apiLoadedCBName] = this.handleApiLoaded.bind(this);\n        document.head.appendChild(script);\n    }\n\n    /**\n     * Fires when the component is connected to the DOM\n     */\n    connectedCallback() {\n        this._markerElems = this.querySelectorAll('gl-google-marker');\n    }\n\n    adoptedCallback() {\n        this._markerElems = this.querySelectorAll('gl-google-marker');\n    }\n\n    /**\n     * Handles changes to the component attributes\n     * @param {String} name\n     * @param {String} oldValue\n     * @param {String} newValue\n     */\n    attributeChangedCallback(name, oldValue, newValue) {\n        if (name === 'key' && newValue) {\n            this.key = newValue;\n            this.removeAttribute('key');\n            this.loadGoogleMapsApi();\n        }\n\n        if (name === 'show-markers') {\n            this.markers.forEach((marker) => {\n                if (marker.type === 'client') {\n                    marker.setVisible(this.isMarkersVisible);\n                }\n            });\n        }\n\n        if (name === 'show-kml') {\n            this.kmlLayer.setMap(this.isKmlVisible ? this.map : null);\n        }\n\n        if (name === 'show-image') {\n            this.imageLayer.setMap(this.isImageVisible ? this.map : null);\n            this.markers.forEach((marker) => {\n                if (marker.type === 'admin') {\n                    marker.setVisible(this.isImageVisible);\n                }\n            });\n        }\n    }\n}\n\nif (!window.customElements.get('gl-google-map')) {\n    window.customElements.define('gl-google-map', GlGoogleMap);\n}\n","import { FieldInput } from '../field-input/field-input';\n\nexport class MortgageCalcInput extends FieldInput {\n    static sanitize(v) { return (v + '').trim().replace(/[^0-9.]*/g, ''); }\n\n    get type() { return this.getAttribute('type') || 'currency'; }\n    get name() { return this.getAttribute('name') || ''; }\n    get stylizedFormat() {\n        return new Intl.NumberFormat('en-US', {\n            minimumFractionDigits: this.type === 'percentage' ? 1 : 0,\n            maximumFractionDigits: 3\n        }).format;\n    }\n    get currencyFormat() {\n        return new Intl.NumberFormat('en-US', {\n            style: 'currency',\n            currency: 'USD',\n            minimumFractionDigits: 0,\n            maximumFractionDigits: 0,\n        }).format;\n    }\n    get numeric() {\n        const sanitized = MortgageCalcInput.sanitize(this.value);\n        const numeric = (!sanitized || isNaN(sanitized)) ? 0 : sanitized;\n        return Number.isInteger(numeric) ? parseInt(numeric, 10) : parseFloat(numeric);\n    }\n    get stylized() {\n        const stylized = this.stylizedFormat(this.numeric);\n        return this.type === 'percentage' ? stylized + '%' : stylized;\n    }\n    get currency() {\n        const sanitized = this.numeric;\n        return this.currencyFormat(sanitized);\n    }\n\n    handleKeyup(e) {\n        const val = e.target.value;\n        this.value = val === '.' ? val.replace('.', '0.') : val;\n        if (this.type === 'currency') {\n            e.target.value = this.currency;\n        } else if (this.type === 'percentage') {\n            e.target.value = this.stylized;\n        }\n    }\n\n    attributeChangedCallback(attr) {\n        this.handleChanged();\n        if (attr === 'value') {\n            if (this.type === 'currency') {\n                this._value = this.currency;\n            } else if (this.type === 'percentage') {\n                this._value = this.stylized;\n            }\n        }\n    }\n}\n\nif (!window.customElements.get('mortgage-calc-input')) {\n    window.customElements.define('mortgage-calc-input', MortgageCalcInput);\n}\n","import { registerComponents } from '../../common/register-components.js';\nimport { MortgageCalcInput } from '../mortgage-calc-input/mortgage-calc-input.js';\nimport { RadioGroup } from '../radio-group/radio-group.js';\nimport { ChartDonut } from '../../chart/donut/chart-donut.js';\n\n/**\n * @injectHTML\n */\nexport class MortgageCalc extends HTMLElement {\n    static get observedAttributes() {\n        return [\n            'price',\n            'downpayment',\n            'interest',\n            'taxes',\n            'term',\n            'pmi',\n            'hoa',\n            'monthly-payment',\n            'colors',\n        ];\n    }\n\n    constructor() {\n        super();\n\n        registerComponents(MortgageCalcInput, RadioGroup, ChartDonut);\n\n        this.chartElement = undefined;\n\n        this.elements = {\n            price: this.shadowRoot.querySelector('mortgage-calc-input[name=\"price\"]'),\n            downpayment: this.shadowRoot.querySelector('mortgage-calc-input[name=\"downpayment\"]'),\n            interest: this.shadowRoot.querySelector('mortgage-calc-input[name=\"interest\"]'),\n            taxes: this.shadowRoot.querySelector('mortgage-calc-input[name=\"taxes\"]'),\n            term: this.shadowRoot.querySelector('radio-group[name=\"term\"]'),\n            hoa: this.shadowRoot.querySelector('mortgage-calc-input[name=\"hoa\"]'),\n        };\n\n        this.output = {\n            principal: this.shadowRoot.querySelector('#outputPrincipal'), // will include interest\n            taxes: this.shadowRoot.querySelector('#outputTaxes'),\n            fees: this.shadowRoot.querySelector('#outputFees'),\n            perMonth: this.shadowRoot.querySelector('#outputPerMonth'),\n        };\n\n        this.addEventListener('input', this.handleInput, false);\n    }\n\n    get colors() {\n        let colors = this.getAttribute('colors') || '';\n        colors = colors.replace(/'/g, '\"');\n        return colors ? JSON.parse(colors) : [];\n    }\n\n    get currencyFormat() {\n        return new Intl.NumberFormat('en-US', {\n            style: 'currency',\n            currency: 'USD',\n            minimumFractionDigits: 0,\n            maximumFractionDigits: 0,\n        }).format;\n    }\n\n    get price() { return this.elements ? this.elements.price.numeric : 0; }\n    set price(v) { this.elements.price.value = v; }\n\n    get downpayment() { return this.elements ? this.elements.downpayment.numeric : 0; }\n    set downpayment(v) { this.elements.downpayment.value = v; }\n\n    get interest() { return this.elements ? this.elements.interest.numeric : 0; }\n    set interest(v) { this.elements.interest.value = v; }\n\n    get taxes() { return this.elements ? this.elements.taxes.numeric : 0; }\n    set taxes(v) { this.elements.taxes.value = v;}\n\n    get hoa() { return this.elements ? this.elements.hoa.numeric : 0; }\n    set hoa(v) { this.elements.hoa.value = v; }\n\n    get term() { return this.elements ? this.elements.term.numeric : 0; }\n    set term(v) { this.elements.term.value = v; }\n\n    get pmi() { return this.getAttribute('pmi') || ''; }\n\n    get insurance() { return this.getAttribute('insurance') || ''; }\n\n    /**\n     * The mortgage principal is the initial loan amount.\n     * It's the price minus the downpayment you make.\n     * If a home is $500,000 and you put down $100,000,\n     * you'll need to borrow $400,000 from the bank.\n     */\n    get mortgagePrincipal() { return this.price - this.downpayment; }\n\n    /**\n     * The interest rate percentage is divided by 12 (months in a year)\n     * to find the monthly interest rate.\n     * If the annual interest rate is 4%, the monthly interest rate is 0.33%\n     * or 0.0033.\n     */\n    get monthlyInterestRate() { return this.interest / 100 / 12; }\n\n\n    /**\n     * For a fixed-rate mortgage, the term is often 30 or 15 years.\n     * The number of payments is the number of years multiplied by\n     * 12 (months in a year). 30 years would be 360 monthly payments.\n     */\n    get numberOfPayments() { return this.term * 12; }\n\n\n    /**\n     * Monthly principal and interest is calculated against the loan principal\n     * and considers the monthly interest rate and total months in the loan term chosen\n     * @returns {Number}\n     */\n    get monthlyPrincipalAndInterest() {\n        const isCalculable = this.mortgagePrincipal && this.monthlyInterestRate;\n        return isCalculable\n            ? (this.mortgagePrincipal / ((1 - Math.pow(1 + this.monthlyInterestRate, -this.numberOfPayments)) / this.monthlyInterestRate))\n            : 0;\n    }\n\n\n    /**\n     * The monthly mortgage principal divided by the total number\n     * of payments\n     * @returns {Number}\n     */\n    get monthlyMortgagePrincipal() {\n        const monthlyMortgagePrincipal = this.monthlyPrincipalAndInterest - this.monthlyInterestCost;\n        return monthlyMortgagePrincipal;\n    }\n\n    /**\n     * The interest cost is the mortgage principal multiplied by the monthly interest rate\n     * @returns {Number}\n     */\n    get monthlyInterestCost() {\n        const interestCost = this.mortgagePrincipal * this.monthlyInterestRate;\n        return interestCost;\n    }\n\n    /**\n     * Private mortgage insurance (PMI) is required if you put\n     * down less than 20% of the purchase price with a conventional mortgage.\n     * It's typically between 0.2% and 2% of the mortgage principal.\n     */\n    get pmiCost() {\n        const lessThanTwentyPercent = (this.downpayment / this.price) < 0.2;\n        return lessThanTwentyPercent\n            ? ((this.pmi / 100) * this.mortgagePrincipal) / 12\n            : 0;\n    }\n\n    /**\n     * Property tax is a percentage of the price\n     * split into 12 month payments\n     */\n    get taxesCost() {\n        return ((this.taxes / 100) * this.price) / 12;\n    }\n\n    /**\n     * Home insurance is a percentage of the price\n     * split into 12 month payments\n     * @returns {Number}\n     */\n    get insuranceCost() {\n        const insuranceCost = ((this.insurance / 100) * this.price) / 12;\n        return insuranceCost;\n    }\n\n    get feesCost() {\n        const feesCost = this.hoa;\n        return feesCost;\n    }\n\n    /**\n     * Monthly payment adds all the monthly costs up into a single sum\n     * @returns {Number}\n     */\n    get monthlyPayment() {\n        const monthlyPayment = this.monthlyPrincipalAndInterest + this.taxesCost + this.insuranceCost + this.pmiCost + this.feesCost;\n        return monthlyPayment;\n    }\n\n    generateChart() {\n        const chartContainer = this.shadowRoot.querySelector('.mortgage-calc__chart');\n        this.chartElement = document.createElement('chart-donut');\n        this.chartElement.colors = this.colors;\n        this.chartElement.labels = ['Principal + Interest', 'Taxes', 'Fees'];\n        this.chartElement.values = [this.monthlyPrincipalAndInterest, this.taxesCost, this.feesCost];\n\n        chartContainer.append(this.chartElement);\n    }\n\n    /**\n     * Handles input events for the mortgage calc form\n     */\n    handleInput() {\n        this.output.principal.textContent = this.currencyFormat(this.monthlyPrincipalAndInterest);\n        this.output.taxes.textContent = this.currencyFormat(this.taxesCost);\n        this.output.fees.textContent = this.currencyFormat(this.feesCost);\n        this.output.perMonth.textContent = this.currencyFormat(this.monthlyPayment);\n        if (this.chartElement) {\n            this.chartElement.values = [this.monthlyPrincipalAndInterest, this.taxesCost, this.feesCost];\n        }\n    }\n\n    connectedCallback() {\n        this.generateChart();\n    }\n\n    /**\n     * Handles changes to the component attributes\n     * @param {String} attr - The attribute that changed\n     * @param {*} oldVal - The old value\n     * @param {*} newVal - The new value\n     */\n    attributeChangedCallback(attr, oldVal, newVal) {\n        // Update attributes\n        if (attr === 'price') {\n            this.price = newVal;\n        } else if (attr === 'downpayment') {\n            this.downpayment = newVal;\n        } else if (attr === 'interest') {\n            this.interest = newVal;\n        } else if (attr === 'taxes') {\n            this.taxes = newVal;\n        } else if (attr === 'term') {\n            this.term = newVal;\n        } else if (attr === 'hoa') {\n            this.hoa = newVal;\n        }\n\n        // Update the outputs\n        this.output.principal.textContent = this.currencyFormat(this.monthlyMortgagePrincipal + this.monthlyInterestCost);\n        this.output.taxes.textContent = this.currencyFormat(this.taxesCost);\n        this.output.fees.textContent = this.currencyFormat(this.feesCost);\n        this.output.perMonth.textContent = this.currencyFormat(this.monthlyPayment);\n        if (this.chartElement) {\n            this.chartElement.values = [this.monthlyPrincipalAndInterest, this.taxesCost, this.feesCost];\n        }\n    }\n}\n\n// Define the component\nif (!window.customElements.get('mortgage-calc')) {\n    window.customElements.define('mortgage-calc', MortgageCalc);\n}\n"],"names":["ChevronIcon","HTMLElement","constructor","super","el","document","createElement","innerHTML","this","attachShadow","mode","shadowRoot","appendChild","content","cloneNode","observedAttributes","attributeChangedCallback","attrName","oldVal","newVal","querySelector","textContent","registerComponents","args","console","error","window","customElements","get","define","InfoMessage","addEventListener","handleSlotChange","e","target","assignedElements","flatten","length","setAttribute","removeAttribute","FormElement","input","radios","handleFormElementInvalid","bind","handleFormElementInput","valid","hasAttribute","v","registerElementForValidation","element","toggleInvalidAttribute","checkValidity","errorMsg","validity","handleChanged","FieldInput","handleInput","handleKeyup","shadowInput","value","getAttribute","find","tagName","_value","disconnectedCallback","removeEventListener","RadioGroup","static","trim","replace","shadowRadios","numeric","sanitized","sanitize","isNaN","selectedRadio","checked","radio","flatMap","children","filter","attr","detachedCallback","ChartDonut","angle","Math","PI","gap","cx","cy","radius","angleOffset","chartData","segmentElems","isLoaded","svg","generateSegment","updateSegment","currencyFormat","Intl","NumberFormat","style","currency","minimumFractionDigits","maximumFractionDigits","format","colors","JSON","stringify","parse","labels","values","total","reduce","previous","current","circumference","adjustedCircumference","generateSegments","forEach","val","i","circle","createElementNS","title","data","degrees","dataPercentage","push","calculateStrokeDashOffset","calculateTransform","updateSegments","strokeDiff","destroySegments","firstChild","removeChild","shift","connectedCallback","GlGoogleMarker","latitude","parseFloat","longitude","GlGoogleMap","url","repsonse","fetch","json","isAdmin","key","_id","crypto","randomUUID","split","pop","round","random","_imageElem","_markerElems","querySelectorAll","_markers","_adminMarkers","apiLoadedCBName","map","undefined","styleLayer","imageLayer","imageNE","imageNW","imageSW","imageSE","kmlLayer","elem","mapElem","detailElem","generateAdminMarker","generateMarker","loadDetail","isMarkersVisible","isKmlVisible","isImageVisible","overlay","mapStyle","markerElems","imageElemPosition","neLatitude","neLongitude","swLatitude","swLongitude","google","maps","bounds","LatLngBounds","LatLng","setBounds","draw","adminMarkers","arr","Array","isArray","markers","handleApiLoaded","Map","center","lat","lng","mapTypeControl","scaleControl","streetViewControl","fullscreenControl","zoom","setMapStyle","placeImages","generateKml","async","imageUrl","GlGoogleImage","image","_bounds","_map","_div","setMap","label","prototype","OverlayView","onAdd","panes","getPanes","border","position","parentNode","width","height","display","overlayLayer","overlayProjection","getProjection","boundsNE","getNorthEast","boundsSW","getSouthWest","sw","fromLatLngToDivPixel","ne","top","y","left","x","onRemove","getStyle","StyledMapType","name","mapTypes","set","setMapTypeId","KmlLayer","suppressInfoWindows","marker","adminMarker","Marker","type","icon","path","scale","fillColor","strokeColor","fillOpacity","strokeWeight","anchor","Point","draggable","addListener","event","log","latLng","mapMarker","id","animation","Animation","DROP","setIcon","dragendEvent","CustomEvent","detail","dispatchEvent","generateDetail","contentElem","closeElem","className","closeDetail","detailContentElem","markerElem","markerElemChildren","classList","remove","lastChild","child","add","loadGoogleMapsApi","script","src","defer","head","adoptedCallback","oldValue","newValue","setVisible","MortgageCalcInput","stylizedFormat","Number","isInteger","parseInt","stylized","MortgageCalc","chartElement","elements","price","downpayment","interest","taxes","term","hoa","output","principal","fees","perMonth","pmi","insurance","mortgagePrincipal","monthlyInterestRate","numberOfPayments","monthlyPrincipalAndInterest","pow","monthlyMortgagePrincipal","monthlyInterestCost","pmiCost","taxesCost","insuranceCost","feesCost","monthlyPayment","generateChart","chartContainer","append"],"mappings":"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"}