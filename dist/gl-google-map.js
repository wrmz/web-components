!function(t){class GlMarker extends HTMLElement{static get observedAttributes(){return["latitude","longitude","status","color","path","is-admin"]}static#t="M10 20c5.523 0 10-4.477 10-10S15.523 0 10 0 0 4.477 0 10s4.477 10 10 10Z";static#e="M10 0c5.52285 0 10 4.47715 10 10 0 7.50794-5.59957 12.48988-10 12.48988S0 17.78101 0 10C0 4.47715 4.47715 0 10 0Zm0 3.4743c-3.60404 0-6.5257 2.92166-6.5257 6.5257 0 3.60404 2.92166 6.5257 6.5257 6.5257 3.60404 0 6.5257-2.92166 6.5257-6.5257 0-3.60404-2.92166-6.5257-6.5257-6.5257Zm0 3.0039c1.94504 0 3.5218 1.57676 3.5218 3.5218 0 1.94504-1.57676 3.5218-3.5218 3.5218-1.94504 0-3.5218-1.57676-3.5218-3.5218 0-1.94504 1.57676-3.5218 3.5218-3.5218Z";#s;constructor(){super()}get map(){return this.parentElement.map}get mapMarker(){return this.#s}set mapMarker(t){this.#s=t}get latitude(){const t=parseFloat(this.hasAttribute("latitude")?this.getAttribute("latitude"):"0");return isNaN(t)?0:t}set latitude(t){this.setAttribute("latitude",t)}get longitude(){const t=parseFloat(this.hasAttribute("longitude")?this.getAttribute("longitude"):"0");return isNaN(t)?0:t}set longitude(t){this.setAttribute("longitude",t)}get status(){return this.getAttribute("status")}set status(t){this.setAttribute("status",t)}get color(){return this.getAttribute("color")}set color(t){this.setAttribute("color",t)}get isAdmin(){return this.hasAttribute("is-admin")&&"true"===this.getAttribute("is-admin")}set isAdmin(t){t?this.setAttribute("is-admin",!0):this.hasAttribute("is-admin")&&this.removeAttribute("is-admin")}get path(){return this.hasAttribute("path")?this.getAttribute("path"):GlMarker.#e}set path(t){t?this.setAttribute("path",t):this.hasAttribute("path")&&this.removeAttribute("path")}}window.customElements.get("gl-marker")||window.customElements.define("gl-marker",GlMarker);class GlMap extends HTMLElement{static observedAttributes=["type","key","latitude","longitude","map-style"];static#a=new Set;static TYPES={GOOGLE:"google",MAPBOX:"mapbox",IMAGE:"image",TILE:"tile"};static MODES={ADMIN:"admin",DEFAULT:"default"};static STATES={DEFAULT:"default",DETAIL:"detail",LOADING:"loading",CONFIRMING:"confirming",RESIZING:"resizing",DRAGGING:"dragging",ADDING_MARKER:"adding_marker",REMOVING_MARKER:"removing_marker",POSITIONING_MARKER:"positioning_marker"};static#i="https://maps.googleapis.com/maps/api/js";static#o="";static#r="";static#l=!1;static#n=!1;static#h="";static#d=!1;static#g=!1;static registerComponents(t=[]){!function(...t){!t&&console.error("Please register your components")}(t)}static onGoogleMapsApiLoaded(){for(const t of GlMap.#a)"google"===t.type&&t.initGoogleMap();GlMap.#n=!0,GlMap.#l=!1}static loadGoogleMapApi(t){const e=document.getElementById("google_map_script");if(GlMap.#n,!e){const t=document.createElement("script");t.id="google_map_script",t.type="text/javascript",t.defer=!0,t.async=!0,t.src=`${GlMap.#i}?key=${GlMap.#r}&callback=onGoogleMapsApiLoaded`,window.onGoogleMapsApiLoaded=GlMap.onGoogleMapsApiLoaded,GlMap.#l=!0,document.head.appendChild(t)}}static loadMapApi(t,e){if("google"===t)GlMap.registerComponents(GlGoogleMap,GlMarker),GlMap.loadGoogleMapApi(e);else console.error(`GL Map does not recognize the ${t} map API.`)}#p=crypto.randomUUID?crypto.randomUUID().split("-").pop():Math.round(9999*Math.random());#m=!1;#c=!1;#u="";#M=GlMap.MODES.DEFAULT;#b="";#E=GlMap.STATES.LOADING;#v;#k;#S;#L;#w;#y;#A;#f;#G;#_;#T;#x;#D;#C;#I=[];#N(){}#R(){}constructor(){super();const t=document.createElement("template");t.innerHTML='<style>.lot__content h3 span,.lot__cta{font-weight:300;text-transform:uppercase;color:#fff}*,.lot__cta,::after,::before{box-sizing:border-box}:host{position:relative;display:flex;width:100%;max-width:100%;min-height:410px;border-radius:4px;overflow:hidden}:host>img{display:block;width:100%;height:auto}:host .gl-map__loader{position:absolute;display:grid;align-items:center;justify-items:center;align-content:center;gap:40px;top:0;left:0;width:100%;height:100%;color:#fff;opacity:1s;box-shadow:inset 0 0 30px rgb(0 0 0 / .05);background:radial-gradient(circle at 50%,rgb(0 0 0 / 0) 70%,rgb(0 0 0 / .05)) #fff;z-index:1}:host .gl-map__loader svg{width:80px;height:auto}:host .gl-map__loader.loaded{pointer-events:none;animation:1s 1s forwards removeLoader}:host .gl-map__progressbar{position:relative;width:400px;height:5px;border-radius:5px;box-shadow:inset 0 0 3px rgb(0 0 0 / .1),0 0 5px rgb(255 255 255 / 1);overflow:hidden}:host .gl-map__progress{position:absolute;top:0;left:0;width:100%;height:100%;background:#009ad0;transform:scaleX(0);transform-origin:left center;transition:transform 1s ease-in-out}:host .gl-map{position:absolute;top:0;left:0;width:100%;height:100%}:host .gl-map.adding_marker [aria-roledescription=map]{cursor:url("data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'20\' height=\'23\' viewBox=\'0 0 20 23\'%3E%3Cpath fill=\'%23ffffff\' fill-rule=\'nonzero\' d=\'M10 .374c5.523 0 10 4.477 10 10 0 7.508-5.6 12.49-10 12.49S0 18.155 0 10.374c0-5.523 4.477-10 10-10Zm0 3.475A6.526 6.526 0 1 0 10 16.9 6.526 6.526 0 0 0 10 3.85Zm0 2.562c.314 0 .574.23.618.532l.007.093-.001 2.624h2.626a.625.625 0 0 1 .092 1.244l-.092.007-2.626-.001.001 2.626a.625.625 0 0 1-1.243.092l-.007-.092-.001-2.626H6.75a.625.625 0 0 1-.092-1.243l.092-.006 2.624-.001.001-2.624c0-.346.28-.625.625-.625Z\'/%3E%3C/svg%3E") 10 22,pointer!important}:host .gl-map__detail,:host .gl-map__map{position:absolute;top:0;height:100%}:host .gl-map__map{left:0;width:100%}:host .gm-style .gmnoprint.gm-bundled-control{margin:3px!important}:host .gl-map__detail{right:0;width:0;max-width:360px;overflow:hidden;box-sizing:border-box;transition:width .2s ease-out;will-change:width}:host .gl-map__detail::after{content:\'\';position:absolute;top:0;left:0;width:100%;mix-blend-mode:multiply}:host .gl-map.detail .gl-map__detail{width:50%}:host .gl-map__detail-close{cursor:pointer;position:absolute;display:flex;align-items:center;justify-content:center;top:9px;right:9px;width:30px;height:30px;margin:0;padding:0;font-size:30px;font-weight:300;color:#666;border:0;border-radius:4px;background:rgb(255 255 255 / 85%);backdrop-filter:brightness(140%) blur(10px);transition:color .2s ease-out,background .2s ease-out}:host .gl-map__detail-close:focus,:host .gl-map__detail-close:hover{color:#333;background:#fff}:host .gl-map__detail-content{position:relative;top:3px;width:calc(100% - 3px);height:calc(100% - 6px);overflow:auto;box-sizing:border-box}:host .gl__edit{cursor:pointer;display:flex;align-items:center;justify-content:center;width:40px;height:40px;color:#666;border:0;border-radius:4px;background:#fff;background:rgb(255 255 255 / 85%);backdrop-filter:blur(10px);transition:color .2s ease-out,background .2s ease-out}.lot__content,.lot__image{background:rgb(255 255 255 / 85%);backdrop-filter:brightness(140%) blur(10px)}:host .gl__edit:focus,:host .gl__edit:hover{color:#333;background:#fff}:host .gl-map__button{cursor:pointer;display:flex;align-items:center;justify-content:center;width:40px;height:40px;color:#666;border:0;border-radius:2px;background:rgb(255 255 255 / 85%);backdrop-filter:brightness(140%) blur(10px);transition:color .2s ease-out,background .2s ease-out}:host .gl-map__button:focus,:host .gl-map__button:hover{color:#333;background:#fff}:host .gl-map__button.active{color:#1e90ff;background:#fff}:host .gl-map__recenter{left:3px!important;top:87px!important}:host .gl-map__resize{left:3px!important;top:130px!important}:host .gl-map__drag{left:3px!important;top:173px!important}:host .gl-map__add-marker{left:3px!important;top:216px!important}:host .gl-map__remove-marker{left:3px!important;top:259px!important}:host .gl-map__legend{position:relative;height:80px;max-width:calc(100% - 49px);padding:0 33px 0 0;margin:3px;border-radius:2px;box-sizing:border-box}:host .gl-map__legend-toggle{cursor:pointer;position:absolute;top:0;right:0;width:80px;height:30px;font-size:20px;letter-spacing:2px;color:#666;border:0;border-radius:2px;box-sizing:border-box;background:rgb(255 255 255 / 85%);backdrop-filter:brightness(140%) blur(10px);transform-origin:top left;transform:rotate(90deg) translate(0,-80px);transition:color .2s ease-out,border-radius .2s ease-out,background .2s ease-out}:host .gl-map__legend-toggle:hover{color:#000;background:#fff}:host .gl-map__legend-drawer{position:absolute;top:0;left:auto;right:33px;height:100%;max-width:0;overflow:hidden;transition:max-width .3s ease-out}.lot,.lot__image{position:relative}:host .gl-map__legend-content{position:relative;display:grid;grid-auto-flow:column dense;grid-auto-columns:minmax(64px,1fr);gap:3px;height:100%;padding:3px;box-sizing:border-box;background:rgb(255 255 255 / 65%);backdrop-filter:brightness(140%) blur(6px)}:host .gl-map__legend-toggle[aria-expanded=true]{border-radius:0 3px 3px 0}:host .gl-map__legend-toggle[aria-expanded=true]+.gl-map__legend-drawer{max-width:2000px;transition:max-width .6s ease-in-out}::slotted(.legend-item){display:grid;align-items:center;justify-items:center;padding:10px;background:rgb(255 255 255 / 50%);box-sizing:border-box}::slotted(.legend-item:first-child){border:3px}::slotted(.legend-item.available) svg{color:#666}::slotted(.legend-item.pendingsvg){color:#9d7f09}::slotted(.legend-item.modelsvg){color:#0089d1}::slotted(.legend-item.sold) svg{color:#d72525}:slotted .legend-item.sold svg{color:#d72525}.lot{display:grid;grid-template-rows:max-content 1fr;height:100%}.lot__image{width:100%;height:0;margin-bottom:3px;padding-top:calc(100% * (9 / 16));border-radius:0 4px 0 0}.lot__cta,.lot__img{width:calc(100% - 6px)}.lot__img{position:absolute;display:block;top:3px;left:3px;height:calc(100% - 6px);object-fit:cover;object-position:center;border-radius:2px 4px 2px 2px}.lot__content{position:relative;padding:17px;border-radius:0 0 4px}.lot__content h3{display:grid;grid-auto-flow:column;grid-auto-columns:max-content;gap:3px;margin:0 0 10px}.lot__content h3 span{display:inline-block;margin:0;padding:.25em .75em;font-size:12px;border-radius:2px;background:#333}.lot__content h3 .sold{background:#d72525}.lot__content h3 .model{background:#0089d1}.lot__content h3 .pending{background:#9d7f09}.lot__content p{margin:0;font-size:16px}.lot__snapshot{display:grid;grid-template-columns:repeat(3,max-content);gap:.75em;margin:10px 0;line-height:1}.lot__snapshot div:not(:first-child){padding-left:.75em;border-left:1px solid #666}.lot__cta{position:absolute;display:flex;align-items:center;justify-content:center;height:40px;right:3px;bottom:3px;padding:0 17px;font-size:14px;text-decoration:none;border-radius:2px 2px 4px;background:#1649c8;transition:background .2s ease-out}.lot__cta:focus,.lot__cta:hover{background:#142755}@keyframes removeLoader{0%{opacity:1}100%{opacity:0}}</style><slot></slot><div class="gl gl-map"><div class="gl-map__map"></div><div class="gl-map__detail"><div class="gl-map__detail-content"></div><button type="button" class="gl-map__detail-close" aria-label="Close detail panel.">&times;</button></div><div class="gl-map__loader"><svg title="Graphic Language" viewBox="0 0 673 998.12" xmlns="http://www.w3.org/2000/svg"><path d="m673 0h-673v673h478.78l9.72 69.67 85.83-69.67h98.67z" fill="#009ad0"></path><path d="m334.65 132.13h-4.3c-37.91.84-67.25 8.31-88.08 22.32-3.31 1.54-7.77 5.49-13.46 11.83-13.86 14.25-20.73 31.37-20.73 51.31 0 22.37 9.5 41.42 28.6 57.2 14.45 11.18 32.32 19.4 53.59 24.64l-24.64 5.59c-16.87 4.41-29.59 9.65-38.15 15.79-9.25 6.58-13.81 14.7-13.81 24.35l.99 7.52c.55 1.53 1.29 3.07 2.23 4.5 12.22-4.6 25.83-9.45 40.77-14.5-1.29-1.83-1.93-3.96-1.93-6.43 0-5.05 3.07-9.3 9.21-12.82l6.58-3.27 3.96-1.34 23.65-5.89 31.23-6.58 6.28-.99c19.7-3.76 33.95-6.93 42.71-9.55 14.5-4.35 27.31-10.29 38.5-17.76 23.65-15.98 35.48-36.72 35.48-62.1 0-16.23-4.06-30.04-12.17-41.42-10.49-14.5-26.62-25.43-48.3-32.91-18.01-6.33-37.41-9.5-58.19-9.5zm-4.3 14.45h1.63c22.62 0 39.59 6.68 50.97 20.04 6.78 7.87 11.33 17.12 13.61 27.76 1.24 5.79 1.88 12.97 1.88 21.57 0 30.43-10.19 51.51-30.58 63.09-10.98 6.14-23.26 9.2-36.86 9.2h-.64c-18.8-.2-34.29-5.44-46.32-15.79-14.5-12.47-21.62-30.98-21.38-55.52 0-20.83 5.14-37.26 15.44-49.34 11.43-13.8 28.85-20.83 52.26-21.03z" fill="#fff"></path><path d="m392.56 360.03c-1.98-.3-18.48-1.98-22.6-2.31-17.48-1.49-35.07-1.73-39.27-1.73-25.63-.44-50.18 2.72-73.63 9.5-6.98 1.93-13.66 4.3-20.14 7.08.15.05.3.1.4.2l-7.87 3.61c-2.67 1.14-5.2 2.37-7.67 3.66l-2.43 1.39c-2.18 1.24-4.31 2.52-6.33 3.91l-.69.44c-.64.5-1.29.94-1.98 1.44-18.61 13.36-28.01 30.58-28.26 51.61-.24 29.15 15.49 52.25 47.01 69.38 28.31 15.09 62.06 22.37 101.25 21.67 28.06-.45 51.96-3.96 71.7-10.49 29.34-9.9 53.44-26.87 72.29-50.97 9.4-12.27 14.16-25.09 14.16-38.45 0-14.25-5.15-26.87-15.44-37.81-17.57-17.57-46.68-27.84-80.49-32.13zm44.32 63.65c4.35 3.96 6.88 10.79 7.52 20.44 0 16.18-9.06 29.1-27.27 38.74-10.93 5.69-22.47 9.45-34.49 11.18-16.23 3.51-32.91 5.3-49.98 5.3h-2.33c-15.34 0-31.13-1.44-47.31-4.3-27.22-5.05-47.01-13.46-59.53-25.29-7.87-7.72-11.83-16.48-11.83-26.33 0-15.34 9.85-27.32 29.59-35.83 19.5-8.37 46.91-12.52 82.19-12.52l6.88.35c56.36.64 91.84 10.1 106.54 28.26z" fill="#fff"></path><path d="m480.28 535.47c-3.51-15.34-.24-31.17 9.85-47.65-10.09 15.54-24.54 28.6-43.4 39.09-17.72 10.34-31.52 14.05-41.42 11.18 7.03 3.32 15.69 8.26 25.98 14.8 10.29 6.38 17.97 10.79 23.01 13.16 17.76 7.92 39.98 9.9 66.75 5.94-23.01-5.94-36.62-18.11-40.77-36.52z" fill="#fff"></path><g fill="#009ad0"><path d="m40.17 862.3c2.05 0 3.94-.1 5.65-.29 1.72-.19 3.34-.49 4.86-.88s2.96-.86 4.3-1.41 2.69-1.18 4.04-1.88v-16.78h-11.79c-.67 0-1.21-.19-1.62-.58s-.61-.87-.61-1.43v-5.84h23.36v29.2c-1.91 1.38-3.9 2.58-5.97 3.61s-4.28 1.88-6.64 2.58c-2.35.69-4.88 1.2-7.57 1.54s-5.61.5-8.76.5c-5.52 0-10.58-.95-15.19-2.84-4.6-1.89-8.57-4.55-11.89-7.96-3.33-3.42-5.92-7.51-7.78-12.29s-2.79-10.04-2.79-15.77.91-11.1 2.73-15.88 4.42-8.88 7.8-12.29c3.38-3.42 7.47-6.06 12.27-7.94s10.17-2.81 16.11-2.81c3.01 0 5.81.22 8.39.66s4.98 1.08 7.19 1.91 4.26 1.84 6.13 3.03c1.88 1.19 3.63 2.52 5.26 4.01l-2.92 4.67c-.6.96-1.38 1.43-2.34 1.43-.57 0-1.19-.19-1.86-.58-.89-.5-1.88-1.1-2.97-1.81-1.1-.71-2.43-1.39-4.01-2.04s-3.43-1.21-5.58-1.67c-2.14-.46-4.68-.69-7.62-.69-4.28 0-8.16.7-11.63 2.1s-6.42 3.4-8.87 6-4.32 5.75-5.63 9.45-1.96 7.85-1.96 12.45.68 9.11 2.04 12.88 3.28 6.96 5.76 9.58 5.42 4.62 8.81 6c3.4 1.38 7.15 2.07 11.26 2.07z"></path><path d="m130.53 838.04v31.75h-10.25v-76.09h21.5c4.81 0 8.97.49 12.48 1.46 3.5.97 6.4 2.38 8.68 4.22s3.97 4.06 5.07 6.66 1.65 5.51 1.65 8.73c0 2.69-.42 5.2-1.27 7.54s-2.08 4.43-3.69 6.29-3.58 3.44-5.89 4.75c-2.32 1.31-4.95 2.3-7.88 2.97 1.27.74 2.41 1.82 3.4 3.24l22.19 30.21h-9.13c-1.88 0-3.26-.72-4.14-2.18l-19.75-27.18c-.6-.85-1.26-1.46-1.96-1.83-.71-.37-1.77-.56-3.19-.56h-7.81zm0-7.49h10.78c3.01 0 5.65-.36 7.94-1.09 2.28-.72 4.19-1.75 5.73-3.08s2.7-2.91 3.48-4.75 1.17-3.88 1.17-6.11c0-4.53-1.5-7.95-4.49-10.25s-7.44-3.45-13.35-3.45h-11.26v28.72z"></path><path d="m285.25 869.79h-7.96c-.92 0-1.66-.23-2.23-.69s-.99-1.04-1.27-1.75l-7.11-18.37h-34.14l-7.11 18.37c-.25.64-.67 1.2-1.27 1.7s-1.35.74-2.23.74h-7.96l30.42-76.09h10.46l30.42 76.09zm-49.86-28.25h28.41l-11.95-30.95c-.78-1.91-1.54-4.3-2.28-7.17-.39 1.45-.77 2.79-1.14 4.01s-.74 2.29-1.09 3.21z"></path><path d="m341.22 841.33v28.46h-10.25v-76.09h22.46c4.81 0 9 .56 12.56 1.67 3.56 1.12 6.5 2.7 8.84 4.75s4.08 4.53 5.23 7.43 1.73 6.14 1.73 9.72-.62 6.78-1.86 9.72-3.05 5.47-5.44 7.59-5.35 3.78-8.89 4.96c-3.54 1.19-7.59 1.78-12.16 1.78h-12.21zm0-8.18h12.21c2.94 0 5.53-.39 7.78-1.17s4.13-1.87 5.66-3.27c1.52-1.4 2.67-3.07 3.45-5.02s1.17-4.09 1.17-6.42c0-4.85-1.5-8.64-4.49-11.36s-7.51-4.09-13.57-4.09h-12.21z"></path><path d="m491.53 869.79h-10.35v-34.62h-40.99v34.62h-10.35v-76.09h10.35v33.93h40.99v-33.93h10.35z"></path><path d="m557.37 869.79h-10.3v-76.09h10.3z"></path><path d="m666.42 854.07c.57 0 1.08.23 1.54.69l4.04 4.41c-3.11 3.61-6.89 6.42-11.33 8.44s-9.8 3.03-16.06 3.03c-5.49 0-10.46-.95-14.92-2.84s-8.27-4.55-11.42-7.96-5.59-7.51-7.33-12.29-2.6-10.04-2.6-15.77.93-10.99 2.79-15.77 4.47-8.88 7.83-12.32c3.36-3.43 7.39-6.1 12.08-7.99s9.87-2.84 15.53-2.84 10.42.87 14.47 2.6c4.05 1.74 7.65 4.09 10.8 7.06l-3.34 4.73c-.25.35-.53.65-.85.88s-.78.34-1.38.34c-.46 0-.95-.17-1.46-.5-.51-.34-1.12-.75-1.83-1.25s-1.54-1.03-2.5-1.59c-.96-.57-2.09-1.1-3.4-1.59-1.31-.5-2.83-.91-4.57-1.25s-3.74-.5-6-.5c-4.07 0-7.8.7-11.18 2.1s-6.29 3.39-8.73 5.97-4.34 5.73-5.71 9.45c-1.36 3.72-2.04 7.88-2.04 12.48s.68 8.97 2.04 12.69 3.22 6.86 5.58 9.42c2.35 2.57 5.14 4.52 8.36 5.87s6.69 2.02 10.41 2.02c2.26 0 4.3-.13 6.11-.4 1.8-.26 3.48-.68 5.02-1.25s2.97-1.28 4.3-2.15 2.66-1.9 4.01-3.11c.6-.53 1.19-.8 1.75-.8z"></path><path d="m16.54 988.56h32.92v8.65h-43.22v-76.09h10.3v67.43z"></path><path d="m139.35 997.22h-7.96c-.92 0-1.66-.23-2.23-.69s-.99-1.04-1.27-1.75l-7.11-18.37h-34.14l-7.11 18.37c-.25.64-.67 1.2-1.27 1.7s-1.35.74-2.23.74h-7.96l30.42-76.09h10.46l30.42 76.09zm-49.86-28.25h28.41l-11.95-30.95c-.78-1.91-1.54-4.3-2.28-7.17-.39 1.45-.77 2.79-1.14 4.01s-.74 2.29-1.09 3.21z"></path><path d="m172.24 921.48c.44.23.95.7 1.51 1.41l44.07 57.34c-.11-.92-.18-1.81-.21-2.68-.04-.87-.05-1.71-.05-2.52v-53.89h9.03v76.09h-5.2c-.81 0-1.5-.14-2.04-.42-.55-.28-1.09-.76-1.62-1.43l-44.02-57.29c.07.89.12 1.75.16 2.6.03.85.05 1.63.05 2.34v54.21h-9.03v-76.09h5.31c.92 0 1.6.12 2.04.35z"></path><path d="m295.02 989.73c2.05 0 3.94-.1 5.65-.29 1.72-.19 3.34-.49 4.86-.88s2.96-.86 4.3-1.41 2.69-1.18 4.04-1.88v-16.78h-11.79c-.67 0-1.21-.19-1.62-.58s-.61-.87-.61-1.43v-5.84h23.36v29.2c-1.91 1.38-3.9 2.58-5.97 3.61s-4.28 1.88-6.64 2.58c-2.35.69-4.88 1.2-7.57 1.54s-5.61.5-8.76.5c-5.52 0-10.58-.95-15.19-2.84-4.6-1.89-8.57-4.55-11.89-7.96-3.33-3.42-5.92-7.51-7.78-12.29s-2.79-10.04-2.79-15.77.91-11.1 2.73-15.88 4.42-8.88 7.8-12.29c3.38-3.42 7.47-6.06 12.27-7.94s10.17-2.81 16.11-2.81c3.01 0 5.81.22 8.39.66s4.98 1.08 7.19 1.91 4.26 1.84 6.13 3.03c1.88 1.19 3.63 2.52 5.26 4.01l-2.92 4.67c-.6.96-1.38 1.43-2.34 1.43-.57 0-1.19-.19-1.86-.58-.89-.5-1.88-1.1-2.97-1.81-1.1-.71-2.43-1.39-4.01-2.04s-3.43-1.21-5.58-1.67c-2.14-.46-4.68-.69-7.62-.69-4.28 0-8.16.7-11.63 2.1s-6.42 3.4-8.87 6-4.32 5.75-5.63 9.45-1.96 7.85-1.96 12.45.68 9.11 2.04 12.88 3.28 6.96 5.76 9.58 5.42 4.62 8.81 6c3.4 1.38 7.15 2.07 11.26 2.07z"></path><path d="m384.54 989.04c3.15 0 5.96-.53 8.44-1.59s4.57-2.55 6.29-4.46 3.03-4.19 3.93-6.85c.9-2.65 1.35-5.58 1.35-8.76v-46.25h10.25v46.25c0 4.39-.7 8.46-2.1 12.21s-3.4 7-6 9.74-5.78 4.89-9.53 6.45-7.96 2.34-12.64 2.34-8.88-.78-12.64-2.34-6.94-3.71-9.56-6.45-4.63-5.99-6.03-9.74-2.1-7.82-2.1-12.21v-46.25h10.25v46.19c0 3.19.45 6.11 1.35 8.76s2.21 4.94 3.93 6.85 3.82 3.41 6.32 4.49 5.32 1.62 8.47 1.62z"></path><path d="m508.04 997.22h-7.96c-.92 0-1.66-.23-2.23-.69s-.99-1.04-1.27-1.75l-7.11-18.37h-34.14l-7.11 18.37c-.25.64-.67 1.2-1.27 1.7s-1.35.74-2.23.74h-7.96l30.42-76.09h10.46l30.42 76.09zm-49.86-28.25h28.41l-11.95-30.95c-.78-1.91-1.54-4.3-2.28-7.17-.39 1.45-.77 2.79-1.14 4.01s-.74 2.29-1.09 3.21z"></path><path d="m565.28 989.73c2.05 0 3.94-.1 5.65-.29 1.72-.19 3.34-.49 4.86-.88s2.96-.86 4.3-1.41 2.69-1.18 4.04-1.88v-16.78h-11.79c-.67 0-1.21-.19-1.62-.58s-.61-.87-.61-1.43v-5.84h23.36v29.2c-1.91 1.38-3.9 2.58-5.97 3.61s-4.28 1.88-6.64 2.58c-2.35.69-4.88 1.2-7.57 1.54s-5.61.5-8.76.5c-5.52 0-10.58-.95-15.18-2.84s-8.57-4.55-11.89-7.96c-3.33-3.42-5.92-7.51-7.78-12.29s-2.79-10.04-2.79-15.77.91-11.1 2.73-15.88 4.42-8.88 7.81-12.29c3.38-3.42 7.47-6.06 12.26-7.94 4.8-1.88 10.17-2.81 16.11-2.81 3.01 0 5.8.22 8.39.66 2.58.44 4.98 1.08 7.19 1.91s4.26 1.84 6.13 3.03c1.88 1.19 3.63 2.52 5.26 4.01l-2.92 4.67c-.6.96-1.38 1.43-2.34 1.43-.57 0-1.19-.19-1.86-.58-.88-.5-1.88-1.1-2.97-1.81-1.1-.71-2.43-1.39-4.01-2.04s-3.43-1.21-5.58-1.67c-2.14-.46-4.68-.69-7.62-.69-4.28 0-8.16.7-11.63 2.1s-6.42 3.4-8.87 6-4.32 5.75-5.63 9.45-1.96 7.85-1.96 12.45.68 9.11 2.04 12.88 3.28 6.96 5.76 9.58 5.42 4.62 8.81 6c3.4 1.38 7.15 2.07 11.26 2.07z"></path><path d="m672.1 921.13v8.39h-36.53v25.27h29.57v8.07h-29.57v25.96h36.53v8.39h-46.88v-76.09h46.88z"></path></g></svg><div class="gl-map__progressbar"><div class="gl-map__progress"></div></div></div><div class="gl-map__legend"><button type="button" class="gl-map__legend-toggle" title="Show Map Legend" aria-expanded="false">•••</button><div class="gl-map__legend-drawer"><div class="gl-map__legend-content"><slot name="legend"></slot></div></div></div></div>',this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(t.content.cloneNode(!0)),this.onMapUpdated=this.onMapUpdated.bind(this),this.onMutations=this.onMutations.bind(this),this.onLegendToggleElemClick=this.onLegendToggleElemClick.bind(this),this.openDetail=this.openDetail.bind(this),this.closeDetail=this.closeDetail.bind(this),GlMap.#a.add(this),"google"===this.type&&!this.#m&&GlMap.#n&&this.initGoogleMap()}initGoogleMap(){this.#v=new GlGoogleMap(this.#p,this.#x,{latitude:this.latitude,longitude:this.longitude,mapStyle:this.mapStyle,legendElem:this.#w,imageElem:this.#f,markerElems:this.#I,detailElem:this.#G}),this.#v.subscribe(this.onMapUpdated)}onLegendToggleElemClick(){"true"===this.#y.getAttribute("aria-expanded")?this.#y.setAttribute("aria-expanded",!1):this.#y.setAttribute("aria-expanded",!0)}onMapUpdated(t,e){switch(t){case"load":e.progress&&!isNaN(e.progress)&&(this.#L.style.transform=`scaleX(${e.progress/100})`,100===e.progress&&(this.state=GlMap.STATES.DEFAULT));break;case"state":this.state!==e&&(this.state=e);break;case"marker-mouseover":case"marker-mouseout":case"marker-dragend":break;case"marker-click":this.loadDetail(e.glMarker);break;case"marker-added":this.addMarker(e.glMarker);break;default:this.state=GlMap.STATES.DEFAULT,console.warn(`Unsupported map update type: "${t}".`)}}loadDetail(t){const e=t?[...t.children]:[];for(;this.#_.firstChild;)this.#_.removeChild(this.#_.lastChild);e.forEach((t=>{this.#_.appendChild(t.cloneNode(!0))})),this.#C=setTimeout(this.openDetail,200)}openDetail(){this.state=GlMap.STATES.DETAIL,this.#T.addEventListener("click",this.closeDetail,!1)}closeDetail(){this.state=GlMap.STATES.DEFAULT,this.#v.closeDetail(),this.#T.removeEventListener("click",this.closeDetail)}addMarker(t){this.type===GlMap.TYPES.GOOGLE&&(this.#I.push(t),this.#v.markers=[...this.#I])}removeMarker(t){this.type===GlMap.TYPES.GOOGLE&&this.#v.removeMarker(t)}onMutations(t){for(const e of t)if("childList"===e.type){for(const t of e.addedNodes)"GL-MARKER"===t.tagName&&this.addMarker(t);for(const t of e.removedNodes)"GL-MARKER"===t.tagName&&this.removeMarker(t)}}initializeObserver(){this.#k=new MutationObserver(this.onMutations),this.#k.observe(this,{childList:!0})}switchStates(){switch(this.#D.classList.remove(this.#b),this.#b){case GlMap.STATES.LOADING:this.#S.classList.remove("loading"),this.#S.classList.add("loaded");case GlMap.STATES.ADDING_MARKER:case GlMap.STATES.DETAIL:}switch(this.#D.classList.add(this.state),this.state){case GlMap.STATES.LOADING:this.#S.classList.add("loading");case GlMap.STATES.ADDING_MARKER:case GlMap.STATES.DETAIL:}}connectedCallback(){this.isConnected&&(this.#f=this.querySelector("img"),this.#f.remove(),this.#I=[...this.querySelectorAll("gl-marker")],this.#I.forEach((t=>t.remove())),this.#G=this.shadowRoot.querySelector(".gl-map__detail"),this.#_=this.shadowRoot.querySelector(".gl-map__detail-content"),this.#T=this.shadowRoot.querySelector(".gl-map__detail-close"),this.#w=this.shadowRoot.querySelector(".gl-map__legend"),this.#A=this.shadowRoot.querySelector(".gl-map__legend-drawer"),this.#y=this.shadowRoot.querySelector(".gl-map__legend-toggle"),this.#w.remove(),this.#S=this.shadowRoot.querySelector(".gl-map__loader"),this.#L=this.shadowRoot.querySelector(".gl-map__progress"),this.#x=this.shadowRoot.querySelector(".gl-map__map"),this.#D=this.shadowRoot.querySelector(".gl-map"),this.#D.setAttribute("id",`map_${this.#p}`),this.#w&&(this.#A.id=`gl_legend_${this.#p}`,this.#y.id=`gl_legend_toggle_${this.#p}`,this.#y.setAttribute("aria-controls",this.#A.id),this.#y.setAttribute("aria-expanded",!1),this.#y.addEventListener("click",this.onLegendToggleElemClick,!1))),this.initializeObserver()}adoptedCallback(){}attributeChangedCallback(t,e,s){"key"===t&&s&&(this.key=s),this.key&&this.type&&!GlMap.#n&&!GlMap.#l&&GlMap.loadMapApi(this.type,this.key)}disconnectedCallback(){this.#k.disconnect(),this.legendToggleElem&&this.glLegendToggle.removeEventListener("click",this.toggleLegend),this.#C&&clearTimeout(this.#C)}get key(){switch(this.type){case"google":return GlMap.#r;case"mapbox":return GlMap.#h;default:return"unknown"}}set key(t){switch(this.type){case"google":GlMap.#r=t;break;case"mapbox":GlMap.#h=t;break;default:console.warn("GLMap attempted to set an api key before the map type was known")}this.hasAttribute("key")&&this.removeAttribute("key")}get type(){return this.getAttribute("type")}get mode(){return this.#M}set mode(t){if(t&&t!==this.#M)if(Object.values(GlMap.MODES).includes(t))switch(this.#u=this.#M,this.#M=t,this.type){case"google":this.#v.mode=t;break;case"mapbox":break;default:console.warn("GlMap attempted to set a mode for a map without a known type:",this.type)}else console.error(`Invalid mode: ${t}`)}get state(){return this.#E}set state(t){t&&t!==this.#E&&(Object.values(GlMap.STATES).includes(t)?(this.#b=this.#E,this.#E=t,this.switchStates()):console.error(`Invalid state: ${t}`))}get isAdmin(){return this.#c}set isAdmin(t){t?this.setAttribute("is-admin",t):this.hasAttribute&&this.removeAttribute("is-admin"),this.#c=t,this.glGoogleMap&&(this.glGoogleMap.isAdmin=t)}get map(){return this.#v.map}get latitude(){const t=parseFloat(this.hasAttribute("latitude")?this.getAttribute("latitude"):"0");return isNaN(t)?0:t}set latitude(t){this.setAttribute("latitude",t)}get longitude(){const t=parseFloat(this.hasAttribute("longitude")?this.getAttribute("longitude"):"0");return isNaN(t)?0:t}set longitude(t){this.setAttribute("longitude",t)}get mapStyle(){return this.getAttribute("map-style")}set mapStyle(t){t?this.setAttribute("map-style",t):this.hasAttribute("map-style")&&this.removeAttribute("map-style")}}window.customElements.get("gl-map")||window.customElements.define("gl-map",GlMap);class GlGoogleImageFactory{static create(t,e){if(!google||!google.maps)throw new Error("GlGoogleImageFactory: Google Maps API was not loaded.");class GlGoogleImage extends google.maps.OverlayView{#u="";#M="";#b="";#E="";#O={ne:null,nw:null,se:null,sw:null};#P={neLat:"",neLng:"",swLat:"",swLng:""};#z=0;#B=0;#F=0;#Z=0;#c=!1;#v;#j;#U;#K=1;#f;#$;constructor(t,e){super(),this.#v=t,this.#j=t.map,this.#M=GlMap.MODES.DEFAULT,this.#E=GlMap.STATES.LOADING,e&&(this.#P.swLat=e.getAttribute("sw-lat"),this.#P.swLng=e.getAttribute("sw-lng"),this.#P.neLat=e.getAttribute("ne-lat"),this.#P.neLng=e.getAttribute("ne-lng"),this.#f=e,this.#K=e.naturalHeight/e.naturalWidth),this.startX=0,this.startY=0,this.isDragging=!1,this.onDragEnd=this.onDragEnd.bind(this),this.onDragStart=this.onDragStart.bind(this),this.onDrag=this.onDrag.bind(this),this.createMarker=this.createMarker.bind(this),this.setMap(this.#j)}onDragEnd(t){this.isDragging&&(this.isDragging=!1,this.#j.setOptions({draggable:!0}),window.removeEventListener("mousemove",this.onDrag),window.removeEventListener("mouseup",this.onDragEnd),this.#$.addEventListener("mousedown",this.onDragStart,!1))}onDragStart(t){this.isDragging=!0,this.startX=t.clientX,this.startY=t.clientY,this.#j.setOptions({draggable:!1}),this.#$.removeEventListener("mousedown",this.onDragStart),window.addEventListener("mousemove",this.onDrag,!1),window.addEventListener("mouseup",this.onDragEnd,!1)}onDrag(t){if(!this.isDragging)return;const e=t.clientX,s=t.clientY,a=e-this.startX,i=s-this.startY;this.pixelBounds={sw:{x:this.pixelBounds.sw.x+a,y:this.pixelBounds.sw.y+i},ne:{x:this.pixelBounds.ne.x+a,y:this.pixelBounds.ne.y+i}},this.startX=e,this.startY=s,this.draw()}updateMarkerPositions(){const t=this.bounds,e=t.getSouthWest(),s=t.getNorthEast(),a=new google.maps.LatLng(s.lat(),e.lng()),i=new google.maps.LatLng(e.lat(),s.lng());this.#O.ne.setPosition(s),this.#O.nw.setPosition(a),this.#O.se.setPosition(i),this.#O.sw.setPosition(e)}onMarkerDrag(t,e){const s=t.position,a=this.bounds,i=t.position.lat(),o=t.position.lng(),r=a.getSouthWest(),l=a.getNorthEast(),n=new google.maps.LatLng(l.lat(),r.lng()),h=new google.maps.LatLng(r.lat(),l.lng());switch(e){case"ne":this.bounds=new google.maps.LatLngBounds(r,s),this.#O.nw.setPosition(n),this.#O.se.setPosition(h);break;case"nw":this.bounds=new google.maps.LatLngBounds(new google.maps.LatLng(r.lat(),o),new google.maps.LatLng(i,l.lng())),this.#O.ne.setPosition(l),this.#O.sw.setPosition(r);break;case"se":this.bounds=new google.maps.LatLngBounds(new google.maps.LatLng(i,r.lng()),new google.maps.LatLng(l.lat(),o)),this.#O.ne.setPosition(l),this.#O.sw.setPosition(r);break;case"sw":this.bounds=new google.maps.LatLngBounds(s,l),this.#O.nw.setPosition(n),this.#O.se.setPosition(h)}this.draw()}onAdd(){if(this.#P.neLat&&this.#P.neLng&&this.#P.swLat&&this.#P.swLng?(this.#F=parseFloat(this.#P.swLat),this.#Z=parseFloat(this.#P.swLng),this.#z=parseFloat(this.#P.neLat),this.#B=parseFloat(this.#P.neLng),this.bounds=new google.maps.LatLngBounds(new google.maps.LatLng(this.#F,this.#Z),new google.maps.LatLng(this.#z,this.#B))):this.pixelBounds={sw:{x:0,y:0},ne:{x:1,y:-1*this.#K}},this.setupBoundaryMarkers(),this.#f){const t=this.getPanes();this.#f.remove(),this.#$=document.createElement("div"),this.#$.draggable=!0,this.#$.setAttribute("draggable",!0),Object.assign(this.#$.style,{pointerEvents:"all",position:"absolute",userSelect:"none",cursor:"hand"}),Object.assign(this.#f.style,{width:"100%",height:"100%",position:"absolute",display:"block",transition:"all .2s ease-out"}),this.#$.appendChild(this.#f),t.overlayLayer.appendChild(this.#$)}this.recenterMap(),this.state=GlMap.STATES.DEFAULT}draw(){if(this.#$){const t=this.pixelBounds,e=t.ne.x-t.sw.x,s=t.sw.y-t.ne.y;Object.assign(this.#$.style,{top:`${t.ne.y}px`,left:`${t.sw.x}px`,width:`${e}px`,height:`${s}px`})}this.isAdmin!==this.#j.isAdmin&&(this.isAdmin=this.#j.isAdmin)}setupBoundaryMarkers(){const t=this.bounds,e=t.getSouthWest(),s=t.getNorthEast(),a=new google.maps.LatLng(s.lat(),e.lng()),i=new google.maps.LatLng(e.lat(),s.lng()),o={ne:s,nw:a,se:i,sw:e};Object.keys(o).forEach((t=>{this.#O[t]=this.createMarker(o[t],t)}))}createMarker(t,e){const s=new google.maps.Marker({map:this.#j,mode:this.#M,direction:e,position:t,icon:{path:"M10 20c5.523 0 10-4.477 10-10S15.523 0 10 0 0 4.477 0 10s4.477 10 10 10Z",scale:1,fillColor:"white",strokeColor:"white",fillOpacity:.8,strokeWeight:2,anchor:new google.maps.Point(10,10)},visible:!1,draggable:!1});return s.addListener("drag",this.onMarkerDrag.bind(this,s,e)),s}recenterMap(){this.bounds,this.#j.fitBounds(this.bounds,0)}switchModes(){this.#u,GlMap.MODES.ADMIN,this.mode,GlMap.MODES.ADMIN}switchStates(){const t=this.getPanes();this.#b===GlMap.STATES.LOADING&&this.#v.pingLoadState(this),this.#b===GlMap.STATES.RESIZING&&(this.#$.style.boxShadow="none",this.#f.style.backdropFilter="blur(0) brightness(1)",Object.values(this.#O).forEach((t=>{t.setDraggable(!1),t.setVisible(!1)}))),this.#b===GlMap.STATES.DRAGGING&&(this.#$.removeEventListener("mousedown",this.onDragStart),this.#$.remove(),t.overlayLayer.appendChild(this.#$)),this.state,GlMap.STATES.LOADING,this.state===GlMap.STATES.RESIZING&&(this.updateMarkerPositions(),this.#$.style.boxShadow="0 0 0 2px #0388d1",this.#f.style.backdropFilter="blur(2px) brightness(1.3)",Object.values(this.#O).forEach((t=>{t.setDraggable(!0),t.setVisible(!0)}))),this.state===GlMap.STATES.DRAGGING&&(this.#$.remove(),t.overlayMouseTarget.appendChild(this.#$),this.#$.addEventListener("mousedown",this.onDragStart,!1))}onRemove(){this.#$&&(window.removeEventListener("mousemove",this.onDrag,!1),this.#$.removeEventListener("mousedown",this.onDragStart,!1),this.#$.removeEventListener("mouseup",this.onDragEnd,!1),this.#$.remove(),this.#$=null,this.#f=null)}get neLat(){return isNaN(this.#z)?0:this.#z}get neLng(){return isNaN(this.#B)?0:this.#B}get swLat(){return isNaN(this.#F)?0:this.#F}get swLng(){return isNaN(this.#Z)?0:this.#Z}set pixelBounds(t){const e=this.getProjection(),s=e.fromDivPixelToLatLng(t.ne),a=e.fromDivPixelToLatLng(t.sw);this.bounds=new google.maps.LatLngBounds(a,s)}get pixelBounds(){const t=this.getProjection(),e=this.bounds.getSouthWest(),s=this.bounds.getNorthEast();return{sw:t.fromLatLngToDivPixel(e),ne:t.fromLatLngToDivPixel(s)}}get position(){return this.#j.getCenter()}set bounds(t){const e=t.getSouthWest(),s=t.getNorthEast();this.#F=e.lat(),this.#Z=e.lng(),this.#z=s.lat(),this.#B=s.lng()}get bounds(){return new google.maps.LatLngBounds(new google.maps.LatLng(this.#F,this.#Z),new google.maps.LatLng(this.#z,this.#B))}set isAdmin(t){this.#c=t,this.mode=t?GlMap.MODES.ADMIN:GlMap.MODES.DEFAULT}get mode(){return this.#M}set mode(t){t&&t!==this.#M&&(Object.values(GlMap.MODES).includes(t)?(this.#u=this.#M,this.#M=t,this.switchModes()):console.error(`Invalid mode: ${t}`))}get state(){return this.#E}set state(t){t&&t!==this.#E&&(Object.values(GlMap.STATES).includes(t)?(this.#b=this.#E,this.#E=t,this.switchStates()):console.error(`Invalid state: ${t}`))}}return new GlGoogleImage(t,e)}}class GlGoogleMap{static async getStyle(t){if(!t)return null;const e=await fetch(t);return await e.json()}#p="";#u;#b;#M=GlMap.MODES.DEFAULT;#E=GlMap.STATES.LOADING;#j;#x;#w;#f;#G;#H=[];#W=[];#V=[];#q;#X;#Y;constructor(t,e,{latitude:s,longitude:a,mapStyle:i=null,legendElem:o=null,imageElem:r=null,markerElems:l=[],detailElem:n=null}){this.#p=t,this.#x=e,this.#w=o,this.#f=r,this.#G=n,this.latitude=s,this.longitude=a,this.mapStyle=i,this.loadDetailTimeout=void 0,this.imageNE=0,this.imageNW=0,this.imageSW=0,this.imageSE=0,this.mapControls={recenter:null,resize:null,drag:null,addMarker:null,removeMarker:null},this.loadTimeout=null,this.emitMarkerEvent=this.emitMarkerEvent.bind(this),this.createMarker=this.createMarker.bind(this),this.recenterMap=this.recenterMap.bind(this),this.restrictPanning=this.restrictPanning.bind(this),this.toggleResizeState=this.toggleResizeState.bind(this),this.toggleDragState=this.toggleDragState.bind(this),this.toggleAddMarkerState=this.toggleAddMarkerState.bind(this),this.toggleRemoveMarkerState=this.toggleRemoveMarkerState.bind(this),this.onLoaded=this.onLoaded.bind(this),this.onAddMarkerClick=this.onAddMarkerClick.bind(this),this.map=new google.maps.Map(this.#x,{center:{lat:this.latitude,lng:this.longitude},mapTypeControl:!1,scaleControl:!1,streetViewControl:!1,fullscreenControl:!1,zoomControlOptions:{position:google.maps.ControlPosition.TOP_LEFT},zoom:17,maxZoom:19,minZoom:10}),this.map.addListener("dragend",this.restrictPanning),this.markers=l,this.setMapStyle(),this.loadImage(),this.createLegendControl(),this.createCenterMapControl(),this.createResizeMapControl(),this.createDragMapControl(),this.createAddMarkerControl(),this.createRemoveMarkerControl(),this.loadTimeout=setTimeout(this.onLoaded,1e3)}async setMapStyle(){const t=await GlGoogleMap.getStyle(this.mapStyle);t&&(this.styleLayer=new google.maps.StyledMapType(t,{name:`Map${this.#p}`}),this.map.mapTypes.set(`map_${this.#p}`,this.styleLayer),this.map.setMapTypeId(`map_${this.#p}`))}loadImage(){if(!this.#f)return;this.#f.getAttribute("src")&&(this.#Y=GlGoogleImageFactory.create(this,this.#f))}createMarker(t){const e=new google.maps.Marker({map:this.map,id:t.id,type:"client",status:t.status,color:t.color,isSelected:!1,position:{lat:t.latitude,lng:t.longitude},path:t.path,icon:{path:t.path,fillColor:t.color,fillOpacity:1,strokeWeight:0,strokeColor:"#ffffff",anchor:new google.maps.Point(10,22)},animation:google.maps.Animation.DROP,draggable:this.isAdmin});return t.mapMarker=e,e.addListener("mouseover",this.onMarkerMouseover.bind(this,t,e)),e.addListener("mouseout",this.onMarkerMouseout.bind(this,t,e)),e.addListener("dragend",this.onMarkerDragend.bind(this,t,e)),e.addListener("click",this.onMarkerClick.bind(this,t,e)),e}emitMarkerEvent(t,e,s,a){const i=new CustomEvent(t,{detail:{map:this,marker:s,glMarker:e,pixel:a.pixel,domEvent:a.domEvent,position:{latitude:a.latLng.lat(),longitude:a.latLng.lng()}}});this.dispatchEvent(i)}onMarkerClick(t,e,s){this.markers.forEach((s=>{"admin"!==s.type&&(s.id===e.id?(s.isSelected=!0,s.setIcon({path:t.path,fillColor:"white",fillOpacity:1,strokeWeight:0,anchor:new google.maps.Point(10,22)})):(s.isSelected=!1,s.setIcon({path:t.path,fillColor:s.color,fillOpacity:1,strokeWeight:0,anchor:new google.maps.Point(10,22)})))})),this.panToSelectedMarker(e),this.notifySubscribers("marker-click",{glMarker:t,event:s})}onMarkerDrag(t,e){this.notifySubscribers("marker-drag",{glMarker:t,event:e})}onMarkerDragend(t,e,s){this.notifySubscribers("marker-dragend",{glMarker:t,event:s})}onMarkerDragstart(t,e,s){this.notifySubscribers("marker-dragstart",{glMarker:t,event:s})}onMarkerMouseover(t,e,s){e.isSelected||e.setIcon({path:t.path,fillColor:"white",fillOpacity:1,strokeWeight:0,anchor:new google.maps.Point(10,22)}),this.notifySubscribers("marker-mouseover",{glMarker:t,event:s})}onMarkerMouseout(t,e,s){e.isSelected||e.setIcon({path:t.path,fillColor:e.color,fillOpacity:1,strokeWeight:0,anchor:new google.maps.Point(10,22)}),this.notifySubscribers("marker-mouseout",{glMarker:t,event:s})}onLoaded(){clearTimeout(this.loadTimeout),this.loadTimeout=null,this.state=GlMap.STATES.DEFAULT}createCenterMapControl(){const t=document.createElement("button");t.type="button",t.title="Reorient the map to the Image position.",t.className="gl-map__button gl-map__recenter",t.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20"><path fill="currentColor" d="M10 0c5.52285 0 10 4.47715 10 10s-4.47715 10-10 10S0 15.52285 0 10 4.47715 0 10 0ZM3.72462 10.63068h-2.4409c.30834 4.32356 3.76204 7.77726 8.0856 8.0856v-2.4409c-2.97945-.29584-5.34886-2.66525-5.6447-5.6447Zm14.99251-.01202-.04376.00775-.07354.00424-2.32445.00007c-.29584 2.97941-2.66525 5.34882-5.6447 5.64466v2.4409c4.32757-.30863 7.78366-3.76844 8.08645-8.09762Zm-8.08627-4.35022-.0002.89139c0 .3483-.28236.63065-.63066.63065-.32342 0-.58998-.24346-.62641-.5571l-.00424-.07355-.00021-.8914c-1.58435.2659-2.8348 1.51636-3.1007 3.1007l1.1959.00022c.3483 0 .63065.28235.63065.63065 0 .32342-.24345.58998-.5571.62641l-.07355.00424-1.1959.00021c.2659 1.58435 1.51635 2.8348 3.1007 3.1007l.0002-1.21748c0-.3483.28236-.63065.63066-.63065.32342 0 .58998.24346.62641.5571l.00424.07355.00021 1.21748c1.58435-.2659 2.8348-1.51635 3.1007-3.1007l-1.38427-.0002c-.3483 0-.63065-.28236-.63065-.63066 0-.32342.24346-.58998.5571-.62641l.07355-.00424 1.38427-.00021c-.2659-1.58435-1.51635-2.8348-3.1007-3.1007Zm-.00018-4.98472v2.4409c2.97945.29584 5.34886 2.66525 5.6447 5.64466l2.32445.00007a.6341.6341 0 0 1 .11726.01088c-.30275-4.32807-3.75884-7.78788-8.0864-8.09651Zm-9.34696 8.0856h2.4409c.29584-2.97945 2.66525-5.34886 5.6447-5.6447v-2.4409c-4.32356.30834-7.77726 3.76204-8.0856 8.0856Z"/></svg>',this.mapControls.recenter=t,this.mapControls.recenter.addEventListener("click",this.recenterMap,!1),this.map.controls[google.maps.ControlPosition.TOP_LEFT].push(this.mapControls.recenter)}createResizeMapControl(){const t=document.createElement("button");t.type="button",t.title="Resize the Image.",t.className="gl-map__button gl-map__resize",t.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="21" viewBox="0 0 20 21"><path fill="currentColor" fill-rule="nonzero" d="m19.831.574.051.061.064.111.018.046.02.065.01.051.006.093v16a.625.625 0 0 1-1.243.092l-.007-.092V2.508l-3.756 3.758.006.11v13a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1v-13a1 1 0 0 1 1-1h13l.109.006 3.757-3.756H3.375A.625.625 0 0 1 3.283.383l.092-.007h16c.04 0 .079.003.117.01l.06.015.067.024.063.031.068.045.081.073ZM12.5 7.875h-10v10h10v-10Z"/></svg>',this.mapControls.resize=t,this.mapControls.resize.style.display="none",this.map.controls[google.maps.ControlPosition.TOP_LEFT].push(this.mapControls.resize)}createDragMapControl(){const t=document.createElement("button");t.type="button",t.title="Drag the Image.",t.className="gl-map__button gl-map__drag",t.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="21" height="21" viewBox="0 0 21 21"><path fill="currentColor" fill-rule="nonzero" d="m10.346.875.09.01.078.019.058.021.046.022a.624.624 0 0 1 .15.11l2.17 2.172a.625.625 0 0 1-.813.944l-.07-.06-1.104-1.105v7.242h7.24l-1.103-1.104a.625.625 0 0 1 .814-.944l.07.06 2.171 2.171.064.075.059.099.037.1.02.101.003.088-.01.09-.019.077-.021.058-.022.046a.624.624 0 0 1-.11.15l-2.172 2.17a.625.625 0 0 1-.944-.813l.06-.07 1.104-1.104H10.95v7.241l1.105-1.103a.625.625 0 0 1 .944.813l-.06.07-2.171 2.171-.075.064-.099.06-.1.037-.101.019-.088.003-.09-.01-.077-.018-.058-.022-.046-.022a.624.624 0 0 1-.15-.11l-2.17-2.171a.625.625 0 0 1 .813-.945l.07.06 1.104 1.104V11.5H2.46l1.103 1.104a.625.625 0 0 1-.813.944l-.07-.06-2.171-2.171-.064-.075-.06-.099-.037-.1-.019-.101-.003-.088.01-.09.018-.077.022-.058.022-.046a.624.624 0 0 1 .11-.15l2.171-2.17a.625.625 0 0 1 .945.813l-.06.07-1.105 1.104H9.7V3.008L8.598 4.112a.625.625 0 0 1-.944-.813l.06-.07 2.17-2.171.075-.064.1-.059.1-.038.101-.019.087-.003Z"/></svg>',this.mapControls.drag=t,this.mapControls.drag.style.display="none",this.map.controls[google.maps.ControlPosition.TOP_LEFT].push(this.mapControls.drag)}createAddMarkerControl(){const t=document.createElement("button");t.type="button",t.title="Add a new marker.",t.className="gl-map__button gl-map__add-marker",t.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="23" viewBox="0 0 20 23"><path fill="currentColor" fill-rule="nonzero" d="M10 .374c5.523 0 10 4.477 10 10 0 7.508-5.6 12.49-10 12.49S0 18.155 0 10.374c0-5.523 4.477-10 10-10Zm0 3.475A6.526 6.526 0 1 0 10 16.9 6.526 6.526 0 0 0 10 3.85Zm0 2.562c.314 0 .574.23.618.532l.007.093-.001 2.624h2.626a.625.625 0 0 1 .092 1.244l-.092.007-2.626-.001.001 2.626a.625.625 0 0 1-1.243.092l-.007-.092-.001-2.626H6.75a.625.625 0 0 1-.092-1.243l.092-.006 2.624-.001.001-2.624c0-.346.28-.625.625-.625Z"/></svg>',this.mapControls.addMarker=t,this.mapControls.addMarker.style.display="none",this.map.controls[google.maps.ControlPosition.TOP_LEFT].push(this.mapControls.addMarker)}createRemoveMarkerControl(){const t=document.createElement("button");t.type="button",t.title="Add a new marker.",t.className="gl-map__button gl-map__remove-marker",t.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="24" viewBox="0 0 20 24"><path fill="currentColor" fill-rule="nonzero" d="M10 .677c5.523 0 10 4.477 10 10 0 7.508-5.6 12.49-10 12.49s-10-4.71-10-12.49c0-5.523 4.477-10 10-10Zm0 3.474a6.526 6.526 0 1 0 0 13.051 6.526 6.526 0 0 0 0-13.051Zm3.25 5.812a.625.625 0 0 1 .092 1.243l-.092.007h-6.5a.625.625 0 0 1-.092-1.243l.092-.007h6.5Z"/></svg>',this.mapControls.removeMarker=t,this.mapControls.removeMarker.style.display="none",this.map.controls[google.maps.ControlPosition.TOP_LEFT].push(this.mapControls.removeMarker)}createLegendControl(){this.mapControls.legend=this.#w,this.map.controls[google.maps.ControlPosition.TOP_RIGHT].push(this.mapControls.legend)}recenterMap(){this.#Y&&this.#Y.recenterMap()}restrictPanning(){const t=this.#Y.bounds;this.map.getBounds();const e=this.map.getCenter();if(!t.contains(e)){const s=Math.max(t.getSouthWest().lat(),Math.min(t.getNorthEast().lat(),e.lat())),a=Math.max(t.getSouthWest().lng(),Math.min(t.getNorthEast().lng(),e.lng()));this.map.panTo(new google.maps.LatLng(s,a))}}toggleResizeState(){this.#Y&&(this.state=this.state===GlMap.STATES.RESIZING?GlMap.STATES.DEFAULT:GlMap.STATES.RESIZING)}toggleDragState(){this.#Y&&(this.state=this.state===GlMap.STATES.DRAGGING?GlMap.STATES.DEFAULT:GlMap.STATES.DRAGGING)}toggleAddMarkerState(){this.state=this.state===GlMap.STATES.ADDING_MARKER?GlMap.STATES.DEFAULT:GlMap.STATES.ADDING_MARKER}toggleRemoveMarkerState(){this.state=this.state===GlMap.STATES.REMOVING_MARKER?GlMap.STATES.DEFAULT:GlMap.STATES.REMOVING_MARKER}closeDetail(){this.markers.forEach((t=>{t.isSelected&&"admin"!==t.type&&t.setIcon({path:t.path,fillColor:t.color,fillOpacity:1,strokeWeight:0,anchor:new google.maps.Point(10,22)})}))}getPixelCoordinate(t){return this.#Y.getProjection().fromLatLngToDivPixel(t)}setAdminMode(t){this.map&&(this.map.isAdmin=t),this.#Y&&(this.#Y.isAdmin=t),this.markers.forEach((t=>{t.setDraggable(this.isAdmin)}))}panToSelectedMarker(t,e=100,s=0){const a=this.#Y.getProjection(),i=a.fromLatLngToDivPixel(t.getPosition()),o={x:i.x+e,y:i.y+s};this.map.panTo(a.fromDivPixelToLatLng(o))}onAddMarkerClick(t){const e=document.createElement("gl-marker");e.latitude=t.latLng.lat(),e.longitude=t.latLng.lng(),e.status="model",e.color="#60b3df",e.path="M10 0c5.52285 0 10 4.47715 10 10 0 7.50794-5.59957 12.48988-10 12.48988S0 17.78101 0 10C0 4.47715 4.47715 0 10 0Zm0 3.4743c-3.60404 0-6.5257 2.92166-6.5257 6.5257 0 3.60404 2.92166 6.5257 6.5257 6.5257 3.60404 0 6.5257-2.92166 6.5257-6.5257 0-3.60404-2.92166-6.5257-6.5257-6.5257Zm0 3.0039c1.94504 0 3.5218 1.57676 3.5218 3.5218 0 1.94504-1.57676 3.5218-3.5218 3.5218-1.94504 0-3.5218-1.57676-3.5218-3.5218 0-1.94504 1.57676-3.5218 3.5218-3.5218Z",this.#q=e,this.notifySubscribers("marker-added",{glMarker:this.#q}),this.state=GlMap.STATES.POSITIONING_MARKER}switchModes(){this.#u===GlMap.MODES.ADMIN&&(this.mapControls.resize.style.display="none",this.mapControls.drag.style.display="none",this.mapControls.addMarker.style.display="none",this.mapControls.removeMarker.style.display="none",this.mapControls.resize.removeEventListener("click",this.toggleResizeState),this.mapControls.drag.removeEventListener("click",this.toggleDragState),this.mapControls.addMarker.removeEventListener("click",this.toggleAddMarkerState),this.mapControls.removeMarker.removeEventListener("click",this.toggleRemoveMarkerState),this.map&&this.map.addListener("dragend",this.restrictPanning)),this.mode===GlMap.MODES.ADMIN&&(this.mapControls.resize.style.display="",this.mapControls.drag.style.display="",this.mapControls.addMarker.style.display="",this.mapControls.removeMarker.style.display="",this.mapControls.resize.addEventListener("click",this.toggleResizeState,!1),this.mapControls.drag.addEventListener("click",this.toggleDragState,!1),this.mapControls.addMarker.addEventListener("click",this.toggleAddMarkerState,!1),this.mapControls.removeMarker.addEventListener("click",this.toggleRemoveMarkerState,!1),this.map&&google.maps.event.clearListeners(this.map,"dragend"))}switchStates(){switch(this.#b){case GlMap.STATES.LOADING:break;case GlMap.STATES.RESIZING:this.markers.forEach((t=>t.setVisible(!0))),this.#Y.state=GlMap.STATES.DEFAULT,this.mapControls.resize.classList.remove("active");break;case GlMap.STATES.DRAGGING:this.markers.forEach((t=>t.setVisible(!0))),this.#Y.state=GlMap.STATES.DEFAULT,this.mapControls.drag.classList.remove("active");break;case GlMap.STATES.ADDING_MARKER:google.maps.event.clearListeners(this.map,"click"),this.mapControls.addMarker.classList.remove("active"),this.markers.forEach((t=>t.setOpacity(1)));break;case GlMap.STATES.POSITIONING_MARKER:this.#q.mapMarker.setDraggable(!1),this.#q=null;break;case GlMap.STATES.REMOVING_MARKER:this.markers.forEach((t=>t.setOpacity(1))),this.mapControls.removeMarker.classList.remove("active");case GlMap.STATES.CONFIRMING:}switch(this.state){case GlMap.STATES.LOADING:this.pingLoadState(this);break;case GlMap.STATES.RESIZING:this.markers.forEach((t=>t.setVisible(!1))),this.#Y.state=GlMap.STATES.RESIZING,this.mapControls.resize.classList.add("active");break;case GlMap.STATES.DRAGGING:this.markers.forEach((t=>t.setVisible(!1))),this.#Y.state=GlMap.STATES.DRAGGING,this.mapControls.drag.classList.add("active");break;case GlMap.STATES.ADDING_MARKER:this.markers.forEach((t=>t.setOpacity(.5))),this.mapControls.addMarker.classList.add("active"),this.map.addListener("click",this.onAddMarkerClick);break;case GlMap.STATES.POSITIONING_MARKER:this.#q.mapMarker.setDraggable(!0);break;case GlMap.STATES.REMOVING_MARKER:this.markers.forEach((t=>t.setOpacity(.5))),this.mapControls.removeMarker.classList.add("active");break;case GlMap.STATES.CONFIRMING:break;default:this.pingLoadState(this)}this.notifySubscribers("state",this.state)}pingLoadState(t){let e=!0;this.#Y.state===GlMap.STATES.LOADING&&(e=!1),e&&this.notifySubscribers("load",{state:this.state,progress:70}),this.state===GlMap.STATES.LOADING&&(e=!1),e&&this.notifySubscribers("load",{state:this.state,progress:100})}subscribe(t){this.#V.push(t)}notifySubscribers(...t){this.#V.forEach((e=>e(...t)))}get mode(){return this.#M}set mode(t){t&&t!==this.#M&&(Object.values(GlMap.MODES).includes(t)?(this.#u=this.#M,this.#M=t,this.switchModes()):console.error(`Invalid mode: ${t}`))}get state(){return this.#E}set state(t){t&&t!==this.#E&&(Object.values(GlMap.STATES).includes(t)?(this.#b=this.#E,this.#E=t,this.switchStates()):console.error(`Invalid state: ${t}`))}get map(){return this.#j}set map(t){this.#j=t instanceof google.maps.Map?t:null}get markers(){return this.#W}set markers(t){this.#H=[...t],this.#W=this.#H.map((t=>t.mapMarker?t.mapMarker:this.createMarker(t)))}}t.GlGoogleMap=GlGoogleMap,Object.defineProperty(t,"__esModule",{value:!0})}({});
