{"version":3,"file":"gl-google-map.js","sources":["../../../../../src/modules/map/gl-google-map/gl-google-map.js"],"sourcesContent":["/*global google*/\n/**\n * @injectHTML\n */\nexport class GlGoogleMap extends HTMLElement {\n    static get observedAttributes() {\n        return [\n            'key',\n        ];\n    }\n\n    constructor() {\n        super();\n        this.key = '';\n        this._id = crypto.randomUUID ? crypto.randomUUID().split('-').pop() : Math.round(Math.random() * 9999);\n        this.apiLoadedCBName = `gl_cb_${this._id}`;\n        this.map = undefined;\n        this.elem = this.shadowRoot.querySelector('.map');\n        this.elem.setAttribute('id', `map_${this._id}`);\n    }\n\n    handleApiLoaded() {\n        console.log('map loaded');\n        this.map = new google.maps.Map(this.elem, {\n            center: { lat: -34.397, lng: 150.644 },\n            zoom: 8\n        });\n    }\n\n    loadGoogleMapsApi() {\n        console.log('loading api');\n        const endpoint = 'https://maps.googleapis.com/maps/api/js';\n        const script = document.createElement('script');\n        script.id = `map_script_${this._id}`;\n        script.type = 'text/javascript';\n        script.src = `${endpoint}?key=${this.key}&callback=${this.apiLoadedCBName}&v=weekly`;\n        script.defer = true;\n        script.async = true;\n        window[this.apiLoadedCBName] = this.handleApiLoaded.bind(this);\n        document.head.appendChild(script);\n    }\n\n    /**\n     * Fires when the component is connected to the DOM\n     */\n    connectedCallback() {\n        console.log('connected');\n    }\n\n    /**\n     * Handles changes to the component attributes\n     * @param {String} name\n     * @param {String} oldValue\n     * @param {String} newValue\n     */\n    attributeChangedCallback(name, oldValue, newValue) {\n        if (name === 'key' && newValue) {\n            this.key = newValue;\n            this.removeAttribute('key');\n            this.loadGoogleMapsApi();\n        }\n    }\n}\n\nif (!window.customElements.get('gl-google-map')) {\n    window.customElements.define('gl-google-map', GlGoogleMap);\n}\n"],"names":["GlGoogleMap","HTMLElement","observedAttributes","constructor","super","this","attachShadow","mode","innerHTML","key","_id","crypto","randomUUID","split","pop","Math","round","random","apiLoadedCBName","map","undefined","elem","shadowRoot","querySelector","setAttribute","handleApiLoaded","console","log","google","maps","Map","center","lat","lng","zoom","loadGoogleMapsApi","script","document","createElement","id","type","src","defer","async","window","bind","head","appendChild","connectedCallback","attributeChangedCallback","name","oldValue","newValue","removeAttribute","customElements","get","define"],"mappings":"AAIO,MAAMA,oBAAoBC,YAClBC,gCACP,MAAO,CACH,MAEP,CAEDC,cACIC,QAAQC,KAAKC,aAAa,CAACC,KAAK,SAASC,UAAU,4KACnDH,KAAKI,IAAM,GACXJ,KAAKK,IAAMC,OAAOC,WAAaD,OAAOC,aAAaC,MAAM,KAAKC,MAAQC,KAAKC,MAAsB,KAAhBD,KAAKE,UACtFZ,KAAKa,gBAAkB,SAASb,KAAKK,MACrCL,KAAKc,SAAMC,EACXf,KAAKgB,KAAOhB,KAAKiB,WAAWC,cAAc,QAC1ClB,KAAKgB,KAAKG,aAAa,KAAM,OAAOnB,KAAKK,MAC5C,CAEDe,kBACIC,QAAQC,IAAI,cACZtB,KAAKc,IAAM,IAAIS,OAAOC,KAAKC,IAAIzB,KAAKgB,KAAM,CACtCU,OAAQ,CAAEC,KAAM,OAAQC,IAAK,SAC7BC,KAAM,GAEb,CAEDC,oBACIT,QAAQC,IAAI,eACZ,MACMS,EAASC,SAASC,cAAc,UACtCF,EAAOG,GAAK,cAAclC,KAAKK,MAC/B0B,EAAOI,KAAO,kBACdJ,EAAOK,IAAM,+CAAmBpC,KAAKI,gBAAgBJ,KAAKa,2BAC1DkB,EAAOM,OAAQ,EACfN,EAAOO,OAAQ,EACfC,OAAOvC,KAAKa,iBAAmBb,KAAKoB,gBAAgBoB,KAAKxC,MACzDgC,SAASS,KAAKC,YAAYX,EAC7B,CAKDY,oBACItB,QAAQC,IAAI,YACf,CAQDsB,yBAAyBC,EAAMC,EAAUC,GACxB,QAATF,GAAkBE,IAClB/C,KAAKI,IAAM2C,EACX/C,KAAKgD,gBAAgB,OACrBhD,KAAK8B,oBAEZ,EAGAS,OAAOU,eAAeC,IAAI,kBAC3BX,OAAOU,eAAeE,OAAO,gBAAiBxD"}