import{registerComponents as t}from"../../common/register-components.js";import{MortgageCalcInput as e}from"../mortgage-calc-input/mortgage-calc-input.js";import{RadioGroup as r}from"../radio-group/radio-group.js";import{ChartDonut as a}from"../../chart/donut/chart-donut.js";class MortgageCalc extends HTMLElement{static get observedAttributes(){return["price","downpayment","interest","taxes","term","pmi","hoa","monthly-payment","colors"]}constructor(){super(),this.attachShadow({mode:"open"}).innerHTML='<style>:host{display:grid;grid-template-columns:50% 50%;gap:50px;--box-shadow-color:var(--primary-light);--box-shadow-width:1px;--box-shadow-color2:transparent;--box-shadow-width2:1px}:host .mortgage-calc__form{display:grid;grid-template-columns:50% 50%;gap:20px}radio-group{grid-column:1/span 2}:host .mortgage-calc__radio{position:relative;display:flex}:host .mortgage-calc__radio input{cursor:pointer;position:absolute;top:0;left:0;min-width:15px;height:15px;border-radius:50%;margin:22px 15px;padding:0;background-clip:content-box;appearance:none;outline:0;box-shadow:inset 0 0 0 var(--box-shadow-width) var(--box-shadow-color),inset 0 0 0 var(--box-shadow-width2) var(--box-shadow-color2)}:host .mortgage-calc__radio input:checked{background-color:var(--primary-mid);--box-shadow-color:var(--primary-mid);--box-shadow-width:2px;--box-shadow-width2:4px;--box-shadow-color2:white}:host .mortgage-calc__radio label{cursor:pointer;display:block;width:100%;padding:15px 20px 15px 40px;border:1px solid var(--primary-light);border-radius:5px}</style><div class="mortgage-calc__form"><mortgage-calc-input name="price" type="currency"><label for="price" slot="label">Price</label> <input type="text" id="price" slot="input" placeholder="123,456" pattern="[0-9$,]+" maxlength="9"></mortgage-calc-input><mortgage-calc-input name="downpayment" type="currency"><label for="downpayment" slot="label">Downpayment</label> <input type="text" id="downpayment" slot="input" placeholder="123,456" pattern="[0-9$,]+" maxlength="9"></mortgage-calc-input><mortgage-calc-input name="interest" type="percentage"><label for="interest" slot="label">Interest Rate</label> <input type="text" id="interest" slot="input" placeholder="3.5" pattern="[0-9.]+" maxlength="9"></mortgage-calc-input><mortgage-calc-input name="taxes" type="percentage"><label for="taxes" slot="label">Est. Monthly Property Taxes</label> <input type="text" id="taxes" slot="input" placeholder="1.4" pattern="[0-9.]+" maxlength="9"></mortgage-calc-input><mortgage-calc-input name="hoa" type="currency"><label for="hoa" slot="label">Monthly HOA Fees</label> <input type="text" id="hoa" slot="input" placeholder="200" pattern="[0-9.]+" maxlength="9"></mortgage-calc-input><radio-group name="term"><span slot="label">Choose a Term</span><div class="mortgage-calc__radio"><input id="term-15" type="radio" value="15" name="term"> <label for="term-15">15-Year Fixed</label></div><div class="mortgage-calc__radio"><input id="term-30" type="radio" value="30" name="term"> <label for="term-30">30-Year Fixed</label></div></radio-group></div><div class="mortgage-calc__results"><div class="mortgage-calc__chart">\x3c!-- Chart is injected here --\x3e</div><div class="mortgage-calc__data"><div class="mortgage-calc__principal">Principal + Interest <span id="outputPrincipal"></span></div><div class="mortgage-calc__taxes">Taxes <span id="outputTaxes"></span></div><div class="mortgage-calc__taxes">Fees &amp; Dues: <span id="outputFees"></span></div><div class="mortgage-calc__total">Amount Per Month: <span id="outputPerMonth"></span></div></div></div>',t(e,r,a),this.chartElement=void 0,this.elements={price:this.shadowRoot.querySelector('mortgage-calc-input[name="price"]'),downpayment:this.shadowRoot.querySelector('mortgage-calc-input[name="downpayment"]'),interest:this.shadowRoot.querySelector('mortgage-calc-input[name="interest"]'),taxes:this.shadowRoot.querySelector('mortgage-calc-input[name="taxes"]'),term:this.shadowRoot.querySelector('radio-group[name="term"]'),hoa:this.shadowRoot.querySelector('mortgage-calc-input[name="hoa"]')},this.output={principal:this.shadowRoot.querySelector("#outputPrincipal"),taxes:this.shadowRoot.querySelector("#outputTaxes"),fees:this.shadowRoot.querySelector("#outputFees"),perMonth:this.shadowRoot.querySelector("#outputPerMonth")},this.addEventListener("input",this.handleInput,!1)}get colors(){let t=this.getAttribute("colors")||"";return t=t.replace(/'/g,'"'),t?JSON.parse(t):[]}get currencyFormat(){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format}get price(){return this.elements?this.elements.price.numeric:0}set price(t){this.elements.price.value=t}get downpayment(){return this.elements?this.elements.downpayment.numeric:0}set downpayment(t){this.elements.downpayment.value=t}get interest(){return this.elements?this.elements.interest.numeric:0}set interest(t){this.elements.interest.value=t}get taxes(){return this.elements?this.elements.taxes.numeric:0}set taxes(t){this.elements.taxes.value=t}get hoa(){return this.elements?this.elements.hoa.numeric:0}set hoa(t){this.elements.hoa.value=t}get term(){return this.elements?this.elements.term.numeric:0}set term(t){this.elements.term.value=t}get pmi(){return this.getAttribute("pmi")||""}get insurance(){return this.getAttribute("insurance")||""}get mortgagePrincipal(){return this.price-this.downpayment}get monthlyInterestRate(){return this.interest/100/12}get numberOfPayments(){return 12*this.term}get monthlyPrincipalAndInterest(){return this.mortgagePrincipal&&this.monthlyInterestRate?this.mortgagePrincipal/((1-Math.pow(1+this.monthlyInterestRate,-this.numberOfPayments))/this.monthlyInterestRate):0}get monthlyMortgagePrincipal(){return this.monthlyPrincipalAndInterest-this.monthlyInterestCost}get monthlyInterestCost(){return this.mortgagePrincipal*this.monthlyInterestRate}get pmiCost(){return this.downpayment/this.price<.2?this.pmi/100*this.mortgagePrincipal/12:0}get taxesCost(){return this.taxes/100*this.price/12}get insuranceCost(){return this.insurance/100*this.price/12}get feesCost(){return this.hoa}get monthlyPayment(){return this.monthlyPrincipalAndInterest+this.taxesCost+this.insuranceCost+this.pmiCost+this.feesCost}generateChart(){const t=this.shadowRoot.querySelector(".mortgage-calc__chart");this.chartElement=document.createElement("chart-donut"),this.chartElement.colors=this.colors,this.chartElement.labels=["Principal + Interest","Taxes","Fees"],this.chartElement.values=[this.monthlyPrincipalAndInterest,this.taxesCost,this.feesCost],t.append(this.chartElement)}handleInput(){this.output.principal.textContent=this.currencyFormat(this.monthlyPrincipalAndInterest),this.output.taxes.textContent=this.currencyFormat(this.taxesCost),this.output.fees.textContent=this.currencyFormat(this.feesCost),this.output.perMonth.textContent=this.currencyFormat(this.monthlyPayment),this.chartElement&&(this.chartElement.values=[this.monthlyPrincipalAndInterest,this.taxesCost,this.feesCost])}connectedCallback(){this.generateChart()}attributeChangedCallback(t,e,r){"price"===t?this.price=r:"downpayment"===t?this.downpayment=r:"interest"===t?this.interest=r:"taxes"===t?this.taxes=r:"term"===t?this.term=r:"hoa"===t&&(this.hoa=r),this.output.principal.textContent=this.currencyFormat(this.monthlyMortgagePrincipal+this.monthlyInterestCost),this.output.taxes.textContent=this.currencyFormat(this.taxesCost),this.output.fees.textContent=this.currencyFormat(this.feesCost),this.output.perMonth.textContent=this.currencyFormat(this.monthlyPayment),this.chartElement&&(this.chartElement.values=[this.monthlyPrincipalAndInterest,this.taxesCost,this.feesCost])}}window.customElements.get("mortgage-calc")||window.customElements.define("mortgage-calc",MortgageCalc);export{MortgageCalc};
//# sourceMappingURL=mortgage-calc.js.map
