{"version":3,"file":"radio-group.js","sources":["../../../../../src/modules/form/radio-group/radio-group.js"],"sourcesContent":["import { registerComponents } from '../../common/register-components.js';\nimport { FormElement } from '../common/FormElement.js';\nimport { InfoMessage } from '../info-message/info-message.js';\n\n/**\n * @injectHTML\n */\nexport class RadioGroup extends FormElement {\n    static sanitize(v) { return (v + '').trim().replace(/[^0-9.]*/g, ''); }\n\n    constructor() {\n        super();\n        registerComponents(InfoMessage);\n        this.radios = null;\n        this.handleSlotChange = this.handleSlotChange.bind(this);\n        this.shadowRadios = this.shadowRoot.querySelector('.radio-group__options slot');\n        this.shadowRadios.addEventListener('slotchange', this.handleSlotChange, false);\n    }\n\n    get value() { return this.getAttribute('value') || ''; }\n    set value(v) { this.setAttribute('value', v); }\n\n    get numeric() {\n        const sanitized = RadioGroup.sanitize(this.value);\n        return isNaN(sanitized) ? 0 : sanitized;\n    }\n\n    get selectedRadio() {\n        return this.radios && this.value\n            ? this.radios.find(el => el.checked)\n            : null;\n    }\n    set selectedRadio(v) {\n        if (v && this.radios) {\n            const radio = this.radios.find(el => el.value === v);\n            if (radio) {\n                radio.checked = true;\n            }\n        }\n    }\n\n    handleSlotChange(e) {\n        this.radios = [...e.target.assignedElements()]\n            .flatMap(el => ([el, ...el.children]))\n            .filter(el => el.tagName === 'INPUT');\n\n        if (this.value) {\n            this.selectedRadio = this.value;\n        }\n\n        this.addEventListener('input', this.handleInput, false);\n    }\n\n    handleInput(e) {\n        this.value = e.target.value;\n    }\n\n    attributeChangedCallback(attr, oldVal, newVal) {\n        this.handleChanged();\n        if (attr === 'value') {\n            this._value = newVal;\n        }\n    }\n\n    detachedCallback() {\n        this.removeEventListener('input', this.handleInput);\n    }\n}\n\nif (!window.customElements.get('radio-group')) {\n    window.customElements.define('radio-group', RadioGroup);\n}\n"],"names":["RadioGroup","FormElement","static","v","trim","replace","constructor","super","el","document","createElement","innerHTML","this","attachShadow","mode","shadowRoot","appendChild","content","cloneNode","registerComponents","InfoMessage","radios","handleSlotChange","bind","shadowRadios","querySelector","addEventListener","value","getAttribute","setAttribute","numeric","sanitized","sanitize","isNaN","selectedRadio","find","checked","radio","e","target","assignedElements","flatMap","children","filter","tagName","handleInput","attributeChangedCallback","attr","oldVal","newVal","handleChanged","_value","detachedCallback","removeEventListener","window","customElements","get","define"],"mappings":"8LAOO,MAAMA,mBAAmBC,EAC5BC,gBAAgBC,GAAK,OAAQA,EAAI,IAAIC,OAAOC,QAAQ,YAAa,GAAM,CAEvEC,cACIC,QAAQ,MAAMC,EAAKC,SAASC,cAAc,YAAYF,EAAGG,UAAY,khBAAkhBC,KAAKC,aAAa,CAACC,KAAK,SAASF,KAAKG,WAAWC,YAAYR,EAAGS,QAAQC,WAAU,IACzqBC,EAAmBC,GACnBR,KAAKS,OAAS,KACdT,KAAKU,iBAAmBV,KAAKU,iBAAiBC,KAAKX,MACnDA,KAAKY,aAAeZ,KAAKG,WAAWU,cAAc,8BAClDb,KAAKY,aAAaE,iBAAiB,aAAcd,KAAKU,kBAAkB,EAC3E,CAEGK,YAAU,OAAOf,KAAKgB,aAAa,UAAY,EAAK,CACpDD,UAAMxB,GAAKS,KAAKiB,aAAa,QAAS1B,EAAK,CAE3C2B,cACA,MAAMC,EAAY/B,WAAWgC,SAASpB,KAAKe,OAC3C,OAAOM,MAAMF,GAAa,EAAIA,CACjC,CAEGG,oBACA,OAAOtB,KAAKS,QAAUT,KAAKe,MACrBf,KAAKS,OAAOc,MAAK3B,GAAMA,EAAG4B,UAC1B,IACT,CACGF,kBAAc/B,GACd,GAAIA,GAAKS,KAAKS,OAAQ,CAClB,MAAMgB,EAAQzB,KAAKS,OAAOc,MAAK3B,GAAMA,EAAGmB,QAAUxB,IAC9CkC,IACAA,EAAMD,SAAU,EAEvB,CACJ,CAEDd,iBAAiBgB,GACb1B,KAAKS,OAAS,IAAIiB,EAAEC,OAAOC,oBACtBC,SAAQjC,GAAE,CAAMA,KAAOA,EAAGkC,YAC1BC,QAAOnC,GAAqB,UAAfA,EAAGoC,UAEjBhC,KAAKe,QACLf,KAAKsB,cAAgBtB,KAAKe,OAG9Bf,KAAKc,iBAAiB,QAASd,KAAKiC,aAAa,EACpD,CAEDA,YAAYP,GACR1B,KAAKe,MAAQW,EAAEC,OAAOZ,KACzB,CAEDmB,yBAAyBC,EAAMC,EAAQC,GACnCrC,KAAKsC,gBACQ,UAATH,IACAnC,KAAKuC,OAASF,EAErB,CAEDG,mBACIxC,KAAKyC,oBAAoB,QAASzC,KAAKiC,YAC1C,EAGAS,OAAOC,eAAeC,IAAI,gBAC3BF,OAAOC,eAAeE,OAAO,cAAezD"}