{"version":3,"file":"gl-google-image.factory.js","sources":["../../../../../../src/modules/map/gl-google-map/gl-google-image.factory.js"],"sourcesContent":["/*global google*/\nexport default class GlGoogleImageFactory {\n    static create(map, bounds, imageElem) {\n        if (!google || !google.maps) {\n            throw new Error('GlGoogleImageFactory: Google Maps API was not loaded.');\n        }\n\n        const GlGoogleImage = function(map, bounds, imageElem) {\n            this._bounds = bounds;\n            this._map = map;\n            this._imageElem = imageElem;\n            this._div = null;\n            this._isAdmin = false;\n\n            this.setMap(this._map);\n        };\n        GlGoogleImage.prototype = new google.maps.OverlayView();\n        GlGoogleImage.prototype.setAdminMode = function(adminMode) {\n            this._isAdmin = adminMode;\n            if (this._div) {\n                if (adminMode) {\n                    this._div.style.boxShadow = '0 0 0 2px #0388d1';\n                } else {\n                    this._div.style.boxShadow = 'none';\n                }\n            }\n        };\n        GlGoogleImage.prototype.onAdd = function() {\n            if (this._imageElem) {\n                const panes = this.getPanes();\n                this._div = document.createElement('div');\n\n                this._div.style.position = 'absolute';\n                this._div.style.userSelect = 'none';\n                this._imageElem.style.width = '100%';\n                this._imageElem.style.height = '100%';\n                this._imageElem.style.position = 'absolute';\n                this._imageElem.style.display = 'block';\n                this._div.appendChild(this._imageElem);\n                // Use `floatPane` instead of `overlayLayer`?\n                panes.overlayLayer.appendChild(this._div);\n            }\n        };\n        GlGoogleImage.prototype.draw = function(bounds) {\n            const overlayProjection = this.getProjection();\n            const _bounds = bounds || this._bounds;\n            const boundsNE = _bounds.getNorthEast();\n            const boundsSW = _bounds.getSouthWest();\n            const ne = overlayProjection.fromLatLngToDivPixel(boundsNE);\n            const sw = overlayProjection.fromLatLngToDivPixel(boundsSW);\n            if (this._div) {\n                this._div.style.top = `${sw.y}px`;\n                this._div.style.left = `${ne.x}px`;\n                this._div.style.width = `${sw.x - ne.x}px`;\n                this._div.style.height = `${ne.y - sw.y}px`;\n            }\n            if (this._isAdmin !== this._map.isAdmin) {\n                this.setAdminMode(this._map.isAdmin);\n            }\n            if (_bounds) {\n                this._bounds = _bounds;\n            }\n        };\n        GlGoogleImage.prototype.onRemove = function() {\n            if (this._div) {\n                this._div.parentNode.removeChild(this._div);\n                this._div = null;\n                this._imageElem = null;\n            }\n        };\n        Object.freeze(GlGoogleImage.prototype);\n\n        return new GlGoogleImage(map, bounds, imageElem);\n    }\n}\n"],"names":[],"mappings":"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"}