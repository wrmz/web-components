{"version":3,"file":"FormElement.js","sources":["../../../../../../src/modules/form/common/FormElement.js"],"sourcesContent":["export class FormElement extends HTMLElement {\n    static get observedAttributes() {\n        return ['invalid', 'value'];\n    }\n\n    constructor() {\n        super();\n        this.input = null;\n        this.handleInvalid = this.handleInvalid.bind(this);\n        this.handleFormInput = this.handleFormInput.bind(this);\n    }\n\n    get valid() { return !this.hasAttribute('invalid') && !this.hasAttribute('aria-invalid'); }\n    set valid(v) {\n        if (v) {\n            this.removeAttribute('invalid');\n            this.removeAttribute('aria-invalid');\n        } else {\n            this.setAttribute('invalid', '');\n            this.setAttribute('aria-invalid', '');\n        }\n    }\n\n    registerElementForValidation(element) {\n        element.addEventListener('invalid', this.handleInvalid, false);\n        element.addEventListener('input', this.handleFormInput, false);\n    }\n\n    handleInvalid(e) {\n        this.valid = false;\n        this.toggleInvalidAttribute(e.target);\n    }\n\n    handleFormInput(e) {\n        const element = e.target;\n        this.valid = element.checkValidity();\n        this.toggleInvalidAttribute(element);\n    }\n\n    toggleInvalidAttribute(element) {\n        const errorMsg = this.shadowRoot.querySelector('info-message[role=\"alert\"]');\n        if (errorMsg) {\n            element.validity.valid ? errorMsg.removeAttribute('invalid') : errorMsg.setAttribute('invalid', '');\n        }\n\n    }\n\n    handleChanged() {\n        const errorMsg = this.shadowRoot.querySelector('info-message[role=\"alert\"]');\n        if (errorMsg) {\n            this.hasAttribute('invalid') ? errorMsg.setAttribute('invalid', '') : errorMsg.removeAttribute('invalid');\n        }\n    }\n\n    attributeChangedCallback() {\n        this.handleChanged();\n    }\n}\n"],"names":[],"mappings":"AAAO,MAAM,WAAW,SAAS,WAAW,CAAC;AAC7C,IAAI,WAAW,kBAAkB,GAAG;AACpC,QAAQ,OAAO,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC;AACpC,KAAK;AACL;AACA,IAAI,WAAW,GAAG;AAClB,QAAQ,KAAK,EAAE,CAAC;AAChB,QAAQ,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;AAC1B,QAAQ,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AAC3D,QAAQ,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AAC/D,KAAK;AACL;AACA,IAAI,IAAI,KAAK,GAAG,EAAE,OAAO,CAAC,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,cAAc,CAAC,CAAC,EAAE;AAC/F,IAAI,IAAI,KAAK,CAAC,CAAC,EAAE;AACjB,QAAQ,IAAI,CAAC,EAAE;AACf,YAAY,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,CAAC;AAC5C,YAAY,IAAI,CAAC,eAAe,CAAC,cAAc,CAAC,CAAC;AACjD,SAAS,MAAM;AACf,YAAY,IAAI,CAAC,YAAY,CAAC,SAAS,EAAE,EAAE,CAAC,CAAC;AAC7C,YAAY,IAAI,CAAC,YAAY,CAAC,cAAc,EAAE,EAAE,CAAC,CAAC;AAClD,SAAS;AACT,KAAK;AACL;AACA,IAAI,4BAA4B,CAAC,OAAO,EAAE;AAC1C,QAAQ,OAAO,CAAC,gBAAgB,CAAC,SAAS,EAAE,IAAI,CAAC,aAAa,EAAE,KAAK,CAAC,CAAC;AACvE,QAAQ,OAAO,CAAC,gBAAgB,CAAC,OAAO,EAAE,IAAI,CAAC,eAAe,EAAE,KAAK,CAAC,CAAC;AACvE,KAAK;AACL;AACA,IAAI,aAAa,CAAC,CAAC,EAAE;AACrB,QAAQ,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;AAC3B,QAAQ,IAAI,CAAC,sBAAsB,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;AAC9C,KAAK;AACL;AACA,IAAI,eAAe,CAAC,CAAC,EAAE;AACvB,QAAQ,MAAM,OAAO,GAAG,CAAC,CAAC,MAAM,CAAC;AACjC,QAAQ,IAAI,CAAC,KAAK,GAAG,OAAO,CAAC,aAAa,EAAE,CAAC;AAC7C,QAAQ,IAAI,CAAC,sBAAsB,CAAC,OAAO,CAAC,CAAC;AAC7C,KAAK;AACL;AACA,IAAI,sBAAsB,CAAC,OAAO,EAAE;AACpC,QAAQ,MAAM,QAAQ,GAAG,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC,4BAA4B,CAAC,CAAC;AACrF,QAAQ,IAAI,QAAQ,EAAE;AACtB,YAAY,OAAO,CAAC,QAAQ,CAAC,KAAK,GAAG,QAAQ,CAAC,eAAe,CAAC,SAAS,CAAC,GAAG,QAAQ,CAAC,YAAY,CAAC,SAAS,EAAE,EAAE,CAAC,CAAC;AAChH,SAAS;AACT;AACA,KAAK;AACL;AACA,IAAI,aAAa,GAAG;AACpB,QAAQ,MAAM,QAAQ,GAAG,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC,4BAA4B,CAAC,CAAC;AACrF,QAAQ,IAAI,QAAQ,EAAE;AACtB,YAAY,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,GAAG,QAAQ,CAAC,YAAY,CAAC,SAAS,EAAE,EAAE,CAAC,GAAG,QAAQ,CAAC,eAAe,CAAC,SAAS,CAAC,CAAC;AACtH,SAAS;AACT,KAAK;AACL;AACA,IAAI,wBAAwB,GAAG;AAC/B,QAAQ,IAAI,CAAC,aAAa,EAAE,CAAC;AAC7B,KAAK;AACL;;;;"}